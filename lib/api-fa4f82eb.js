"use strict";var e=require("./index-fd3fd056.js"),t=require("path"),n=require("child_process"),r=require("fs"),o=require("os"),i=require("assert"),a=require("events"),s=require("buffer"),c=require("stream"),u=require("util");function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var d=l(t),p=l(n),f=l(r),m=l(o),g=l(i),h=l(a),y=l(s),v=l(c),w=l(u);function b(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function x(e,t){const n=function(){if(navigator.userAgentData||!/Safari\//.test(navigator.userAgent)||/Chrom(e|ium)\//.test(navigator.userAgent)||!indexedDB.databases)return Promise.resolve();let e;return new Promise((t=>{const n=()=>indexedDB.databases().finally(t);e=setInterval(n,100),n()})).finally((()=>clearInterval(e)))}().then((()=>{const n=indexedDB.open(e);return n.onupgradeneeded=()=>n.result.createObjectStore(t),b(n)}));return(e,r)=>n.then((n=>r(n.transaction(t,e).objectStore(t))))}let S;function E(){return S||(S=x("keyval-store","keyval")),S}function P(e,t){return e("readonly",(e=>(e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},b(e.transaction))))}var T=Object.freeze({__proto__:null,clear:function(e=E()){return e("readwrite",(e=>(e.clear(),b(e.transaction))))},createStore:x,del:function(e,t=E()){return t("readwrite",(t=>(t.delete(e),b(t.transaction))))},delMany:function(e,t=E()){return t("readwrite",(t=>(e.forEach((e=>t.delete(e))),b(t.transaction))))},entries:function(e=E()){const t=[];return P(e,(e=>t.push([e.key,e.value]))).then((()=>t))},get:function(e,t=E()){return t("readonly",(t=>b(t.get(e))))},getMany:function(e,t=E()){return t("readonly",(t=>Promise.all(e.map((e=>b(t.get(e)))))))},keys:function(e=E()){const t=[];return P(e,(e=>t.push(e.key))).then((()=>t))},promisifyRequest:b,set:function(e,t,n=E()){return n("readwrite",(n=>(n.put(t,e),b(n.transaction))))},setMany:function(e,t=E()){return t("readwrite",(t=>(e.forEach((e=>t.put(e[1],e[0]))),b(t.transaction))))},update:function(e,t,n=E()){return n("readwrite",(n=>new Promise(((r,o)=>{n.get(e).onsuccess=function(){try{n.put(t(this.result),e),r(b(n.transaction))}catch(e){o(e)}}}))))},values:function(e=E()){const t=[];return P(e,(e=>t.push(e.value))).then((()=>t))}});const k={round:!0};var I={exports:{}},C={exports:{}},$=A;A.sync=function(e,t){return j(O.statSync(e),e,t)};var O=f.default;function j(e,t,n){return!(!e.isSymbolicLink()&&!e.isFile())&&function(e,t){var n=void 0!==t.pathExt?t.pathExt:process.env.PATHEXT;if(!n)return!0;if(-1!==(n=n.split(";")).indexOf(""))return!0;for(var r=0;r<n.length;r++){var o=n[r].toLowerCase();if(o&&e.substr(-o.length).toLowerCase()===o)return!0}return!1}(t,n)}function A(e,t,n){O.stat(e,(function(r,o){n(r,!r&&j(o,e,t))}))}var G=N;N.sync=function(e,t){return M(L.statSync(e),t)};var _,L=f.default;function N(e,t,n){L.stat(e,(function(e,r){n(e,!e&&M(r,t))}))}function M(e,t){return e.isFile()&&function(e,t){var n=e.mode,r=e.uid,o=e.gid,i=void 0!==t.uid?t.uid:process.getuid&&process.getuid(),a=void 0!==t.gid?t.gid:process.getgid&&process.getgid(),s=parseInt("100",8),c=parseInt("010",8),u=parseInt("001",8),l=s|c;return n&u||n&c&&o===a||n&s&&r===i||n&l&&0===i}(e,t)}_="win32"===process.platform||e.commonjsGlobal.TESTING_WINDOWS?$:G;var R=B;function B(e,t,n){if("function"==typeof t&&(n=t,t={}),!n){if("function"!=typeof Promise)throw new TypeError("callback not provided");return new Promise((function(n,r){B(e,t||{},(function(e,t){e?r(e):n(t)}))}))}_(e,t||{},(function(e,r){e&&("EACCES"===e.code||t&&t.ignoreErrors)&&(e=null,r=!1),n(e,r)}))}B.sync=function(e,t){try{return _.sync(e,t||{})}catch(e){if(t&&t.ignoreErrors||"EACCES"===e.code)return!1;throw e}};const D="win32"===process.platform||"cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,F=d.default,U=D?";":":",q=R,W=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),z=(e,t)=>{const n=t.colon||U,r=e.match(/\//)||D&&e.match(/\\/)?[""]:[...D?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(n)],o=D?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",i=D?o.split(n):[""];return D&&-1!==e.indexOf(".")&&""!==i[0]&&i.unshift(""),{pathEnv:r,pathExt:i,pathExtExe:o}},K=(e,t,n)=>{"function"==typeof t&&(n=t,t={}),t||(t={});const{pathEnv:r,pathExt:o,pathExtExe:i}=z(e,t),a=[],s=n=>new Promise(((o,i)=>{if(n===r.length)return t.all&&a.length?o(a):i(W(e));const s=r[n],u=/^".*"$/.test(s)?s.slice(1,-1):s,l=F.join(u,e),d=!u&&/^\.[\\\/]/.test(e)?e.slice(0,2)+l:l;o(c(d,n,0))})),c=(e,n,r)=>new Promise(((u,l)=>{if(r===o.length)return u(s(n+1));const d=o[r];q(e+d,{pathExt:i},((o,i)=>{if(!o&&i){if(!t.all)return u(e+d);a.push(e+d)}return u(c(e,n,r+1))}))}));return n?s(0).then((e=>n(null,e)),n):s(0)};var H=K;K.sync=(e,t)=>{t=t||{};const{pathEnv:n,pathExt:r,pathExtExe:o}=z(e,t),i=[];for(let a=0;a<n.length;a++){const s=n[a],c=/^".*"$/.test(s)?s.slice(1,-1):s,u=F.join(c,e),l=!c&&/^\.[\\\/]/.test(e)?e.slice(0,2)+u:u;for(let e=0;e<r.length;e++){const n=l+r[e];try{if(q.sync(n,{pathExt:o})){if(!t.all)return n;i.push(n)}}catch(e){}}}if(t.all&&i.length)return i;if(t.nothrow)return null;throw W(e)};var V={exports:{}};const X=(e={})=>{const t=e.env||process.env;return"win32"!==(e.platform||process.platform)?"PATH":Object.keys(t).reverse().find((e=>"PATH"===e.toUpperCase()))||"Path"};V.exports=X,V.exports.default=X;const Y=d.default,J=H,Q=V.exports;function Z(e,t){const n=e.options.env||process.env,r=process.cwd(),o=null!=e.options.cwd,i=o&&void 0!==process.chdir&&!process.chdir.disabled;if(i)try{process.chdir(e.options.cwd)}catch(e){}let a;try{a=J.sync(e.command,{path:n[Q({env:n})],pathExt:t?Y.delimiter:void 0})}catch(e){}finally{i&&process.chdir(r)}return a&&(a=Y.resolve(o?e.options.cwd:"",a)),a}var ee=function(e){return Z(e)||Z(e,!0)},te={};const ne=/([()\][%!^"`<>&|;, *?])/g;te.command=function(e){return e=e.replace(ne,"^$1")},te.argument=function(e,t){return e=(e=`"${e=(e=(e=`${e}`).replace(/(\\*)"/g,'$1$1\\"')).replace(/(\\*)$/,"$1$1")}"`).replace(ne,"^$1"),t&&(e=e.replace(ne,"^$1")),e};const re=/^#!(.*)/;const oe=f.default,ie=(e="")=>{const t=e.match(re);if(!t)return null;const[n,r]=t[0].replace(/#! ?/,"").split(" "),o=n.split("/").pop();return"env"===o?r:r?`${o} ${r}`:o};var ae=function(e){const t=Buffer.alloc(150);let n;try{n=oe.openSync(e,"r"),oe.readSync(n,t,0,150,0),oe.closeSync(n)}catch(e){}return ie(t.toString())};const se=d.default,ce=ee,ue=te,le=ae,de="win32"===process.platform,pe=/\.(?:com|exe)$/i,fe=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function me(e){if(!de)return e;const t=function(e){e.file=ce(e);const t=e.file&&le(e.file);return t?(e.args.unshift(e.file),e.command=t,ce(e)):e.file}(e),n=!pe.test(t);if(e.options.forceShell||n){const n=fe.test(t);e.command=se.normalize(e.command),e.command=ue.command(e.command),e.args=e.args.map((e=>ue.argument(e,n)));const r=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${r}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}var ge=function(e,t,n){t&&!Array.isArray(t)&&(n=t,t=null);const r={command:e,args:t=t?t.slice(0):[],options:n=Object.assign({},n),file:void 0,original:{command:e,args:t}};return n.shell?r:me(r)};const he="win32"===process.platform;function ye(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function ve(e,t){return he&&1===e&&!t.file?ye(t.original,"spawn"):null}var we={hookChildProcess:function(e,t){if(!he)return;const n=e.emit;e.emit=function(r,o){if("exit"===r){const r=ve(o,t);if(r)return n.call(e,"error",r)}return n.apply(e,arguments)}},verifyENOENT:ve,verifyENOENTSync:function(e,t){return he&&1===e&&!t.file?ye(t.original,"spawnSync"):null},notFoundError:ye};const be=p.default,xe=ge,Se=we;function Ee(e,t,n){const r=xe(e,t,n),o=be.spawn(r.command,r.args,r.options);return Se.hookChildProcess(o,r),o}C.exports=Ee,C.exports.spawn=Ee,C.exports.sync=function(e,t,n){const r=xe(e,t,n),o=be.spawnSync(r.command,r.args,r.options);return o.error=o.error||Se.verifyENOENTSync(o.status,r),o},C.exports._parse=xe,C.exports._enoent=Se;var Pe={exports:{}};!function(e){const t=d.default,n=V.exports,r=e=>{let r;e={cwd:process.cwd(),path:process.env[n()],execPath:process.execPath,...e};let o=t.resolve(e.cwd);const i=[];for(;r!==o;)i.push(t.join(o,"node_modules/.bin")),r=o,o=t.resolve(o,"..");const a=t.resolve(e.cwd,e.execPath,"..");return i.push(a),i.concat(e.path).join(t.delimiter)};e.exports=r,e.exports.default=r,e.exports.env=t=>{const r={...(t={env:process.env,...t}).env},o=n({env:r});return t.path=r[o],r[o]=e.exports(t),r}}(Pe);var Te={exports:{}},ke={exports:{}};const Ie=(e,t)=>{for(const n of Reflect.ownKeys(t))Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n));return e};ke.exports=Ie,ke.exports.default=Ie;const Ce=ke.exports,$e=new WeakMap,Oe=(e,t={})=>{if("function"!=typeof e)throw new TypeError("Expected a function");let n,r=0;const o=e.displayName||e.name||"<anonymous>",i=function(...a){if($e.set(i,++r),1===r)n=e.apply(this,a),e=null;else if(!0===t.throw)throw new Error(`Function \`${o}\` can only be called once`);return n};return Ce(i,e),$e.set(i,r),i};Te.exports=Oe,Te.exports.default=Oe,Te.exports.callCount=e=>{if(!$e.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return $e.get(e)};var je={},Ae={},Ge={};Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.SIGNALS=void 0;Ge.SIGNALS=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];var _e={};Object.defineProperty(_e,"__esModule",{value:!0}),_e.SIGRTMAX=_e.getRealtimeSignals=void 0;_e.getRealtimeSignals=function(){const e=Me-Ne+1;return Array.from({length:e},Le)};const Le=function(e,t){return{name:`SIGRT${t+1}`,number:Ne+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},Ne=34,Me=64;_e.SIGRTMAX=Me,Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.getSignals=void 0;var Re=m.default,Be=Ge,De=_e;Ae.getSignals=function(){const e=(0,De.getRealtimeSignals)();return[...Be.SIGNALS,...e].map(Fe)};const Fe=function({name:e,number:t,description:n,action:r,forced:o=!1,standard:i}){const{signals:{[e]:a}}=Re.constants,s=void 0!==a;return{name:e,number:s?a:t,description:n,supported:s,action:r,forced:o,standard:i}};Object.defineProperty(je,"__esModule",{value:!0}),je.signalsByNumber=je.signalsByName=void 0;var Ue=m.default,qe=Ae,We=_e;const ze=function(e,{name:t,number:n,description:r,supported:o,action:i,forced:a,standard:s}){return{...e,[t]:{name:t,number:n,description:r,supported:o,action:i,forced:a,standard:s}}},Ke=(0,qe.getSignals)().reduce(ze,{});je.signalsByName=Ke;const He=function(e,t){const n=Ve(e,t);if(void 0===n)return{};const{name:r,description:o,supported:i,action:a,forced:s,standard:c}=n;return{[e]:{name:r,number:e,description:o,supported:i,action:a,forced:s,standard:c}}},Ve=function(e,t){const n=t.find((({name:t})=>Ue.constants.signals[t]===e));return void 0!==n?n:t.find((t=>t.number===e))},Xe=function(){const e=(0,qe.getSignals)(),t=We.SIGRTMAX+1,n=Array.from({length:t},((t,n)=>He(n,e)));return Object.assign({},...n)}();je.signalsByNumber=Xe;const{signalsByName:Ye}=je;var Je=({stdout:e,stderr:t,all:n,error:r,signal:o,exitCode:i,command:a,escapedCommand:s,timedOut:c,isCanceled:u,killed:l,parsed:{options:{timeout:d}}})=>{i=null===i?void 0:i;const p=void 0===(o=null===o?void 0:o)?void 0:Ye[o].description,f=`Command ${(({timedOut:e,timeout:t,errorCode:n,signal:r,signalDescription:o,exitCode:i,isCanceled:a})=>e?`timed out after ${t} milliseconds`:a?"was canceled":void 0!==n?`failed with ${n}`:void 0!==r?`was killed with ${r} (${o})`:void 0!==i?`failed with exit code ${i}`:"failed")({timedOut:c,timeout:d,errorCode:r&&r.code,signal:o,signalDescription:p,exitCode:i,isCanceled:u})}: ${a}`,m="[object Error]"===Object.prototype.toString.call(r),g=m?`${f}\n${r.message}`:f,h=[g,t,e].filter(Boolean).join("\n");return m?(r.originalMessage=r.message,r.message=h):r=new Error(h),r.shortMessage=g,r.command=a,r.escapedCommand=s,r.exitCode=i,r.signal=o,r.signalDescription=p,r.stdout=e,r.stderr=t,void 0!==n&&(r.all=n),"bufferedData"in r&&delete r.bufferedData,r.failed=!0,r.timedOut=Boolean(c),r.isCanceled=u,r.killed=l&&!c,r},Qe={exports:{}};const Ze=["stdin","stdout","stderr"],et=e=>{if(!e)return;const{stdio:t}=e;if(void 0===t)return Ze.map((t=>e[t]));if((e=>Ze.some((t=>void 0!==e[t])))(e))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${Ze.map((e=>`\`${e}\``)).join(", ")}`);if("string"==typeof t)return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);const n=Math.max(t.length,Ze.length);return Array.from({length:n},((e,n)=>t[n]))};Qe.exports=et,Qe.exports.node=e=>{const t=et(e);return"ipc"===t?"ipc":void 0===t||"string"==typeof t?[t,t,t,"ipc"]:t.includes("ipc")?t:[...t,"ipc"]};var tt,nt={exports:{}},rt={exports:{}};(tt=rt).exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"],"win32"!==process.platform&&tt.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),"linux"===process.platform&&tt.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED");var ot,it=g.default,at=rt.exports,st=/^win/i.test(process.platform),ct=h.default;function ut(){pt&&(pt=!1,at.forEach((function(e){try{process.removeListener(e,dt[e])}catch(e){}})),process.emit=ht,process.reallyExit=mt,ot.count-=1)}function lt(e,t,n){ot.emitted[e]||(ot.emitted[e]=!0,ot.emit(e,t,n))}"function"!=typeof ct&&(ct=ct.EventEmitter),process.__signal_exit_emitter__?ot=process.__signal_exit_emitter__:((ot=process.__signal_exit_emitter__=new ct).count=0,ot.emitted={}),ot.infinite||(ot.setMaxListeners(1/0),ot.infinite=!0),nt.exports=function(e,t){it.equal(typeof e,"function","a callback must be provided for exit handler"),!1===pt&&ft();var n="exit";t&&t.alwaysLast&&(n="afterexit");return ot.on(n,e),function(){ot.removeListener(n,e),0===ot.listeners("exit").length&&0===ot.listeners("afterexit").length&&ut()}},nt.exports.unload=ut;var dt={};at.forEach((function(e){dt[e]=function(){process.listeners(e).length===ot.count&&(ut(),lt("exit",null,e),lt("afterexit",null,e),st&&"SIGHUP"===e&&(e="SIGINT"),process.kill(process.pid,e))}})),nt.exports.signals=function(){return at},nt.exports.load=ft;var pt=!1;function ft(){pt||(pt=!0,ot.count+=1,at=at.filter((function(e){try{return process.on(e,dt[e]),!0}catch(e){return!1}})),process.emit=yt,process.reallyExit=gt)}var mt=process.reallyExit;function gt(e){process.exitCode=e||0,lt("exit",process.exitCode,null),lt("afterexit",process.exitCode,null),mt.call(process,process.exitCode)}var ht=process.emit;function yt(e,t){if("exit"===e){void 0!==t&&(process.exitCode=t);var n=ht.apply(this,arguments);return lt("exit",process.exitCode,null),lt("afterexit",process.exitCode,null),n}return ht.apply(this,arguments)}const vt=m.default,wt=nt.exports,bt=(e,t,n,r)=>{if(!xt(t,n,r))return;const o=Et(n),i=setTimeout((()=>{e("SIGKILL")}),o);i.unref&&i.unref()},xt=(e,{forceKillAfterTimeout:t},n)=>St(e)&&!1!==t&&n,St=e=>e===vt.constants.signals.SIGTERM||"string"==typeof e&&"SIGTERM"===e.toUpperCase(),Et=({forceKillAfterTimeout:e=!0})=>{if(!0===e)return 5e3;if(!Number.isFinite(e)||e<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e};var Pt={spawnedKill:(e,t="SIGTERM",n={})=>{const r=e(t);return bt(e,t,n,r),r},spawnedCancel:(e,t)=>{e.kill()&&(t.isCanceled=!0)},setupTimeout:(e,{timeout:t,killSignal:n="SIGTERM"},r)=>{if(0===t||void 0===t)return r;let o;const i=new Promise(((r,i)=>{o=setTimeout((()=>{((e,t,n)=>{e.kill(t),n(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))})(e,n,i)}),t)})),a=r.finally((()=>{clearTimeout(o)}));return Promise.race([i,a])},validateTimeout:({timeout:e})=>{if(void 0!==e&&(!Number.isFinite(e)||e<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)},setExitHandler:async(e,{cleanup:t,detached:n},r)=>{if(!t||n)return r;const o=wt((()=>{e.kill()}));return r.finally((()=>{o()}))}};const Tt=e=>null!==e&&"object"==typeof e&&"function"==typeof e.pipe;Tt.writable=e=>Tt(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState,Tt.readable=e=>Tt(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState,Tt.duplex=e=>Tt.writable(e)&&Tt.readable(e),Tt.transform=e=>Tt.duplex(e)&&"function"==typeof e._transform;var kt=Tt,It={exports:{}};const{PassThrough:Ct}=v.default;const{constants:$t}=y.default,Ot=v.default,{promisify:jt}=w.default,At=e=>{e={...e};const{array:t}=e;let{encoding:n}=e;const r="buffer"===n;let o=!1;t?o=!(n||r):n=n||"utf8",r&&(n=null);const i=new Ct({objectMode:o});n&&i.setEncoding(n);let a=0;const s=[];return i.on("data",(e=>{s.push(e),o?a=s.length:a+=e.length})),i.getBufferedValue=()=>t?s:r?Buffer.concat(s,a):s.join(""),i.getBufferedLength=()=>a,i},Gt=jt(Ot.pipeline);class _t extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}async function Lt(e,t){if(!e)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};const{maxBuffer:n}=t,r=At(t);return await new Promise(((t,o)=>{const i=e=>{e&&r.getBufferedLength()<=$t.MAX_LENGTH&&(e.bufferedData=r.getBufferedValue()),o(e)};(async()=>{try{await Gt(e,r),t()}catch(e){i(e)}})(),r.on("data",(()=>{r.getBufferedLength()>n&&i(new _t)}))})),r.getBufferedValue()}It.exports=Lt,It.exports.buffer=(e,t)=>Lt(e,{...t,encoding:"buffer"}),It.exports.array=(e,t)=>Lt(e,{...t,array:!0}),It.exports.MaxBufferError=_t;const{PassThrough:Nt}=v.default;const Mt=kt,Rt=It.exports,Bt=function(){var e=[],t=new Nt({objectMode:!0});return t.setMaxListeners(0),t.add=n,t.isEmpty=r,t.on("unpipe",o),Array.prototype.slice.call(arguments).forEach(n),t;function n(r){return Array.isArray(r)?(r.forEach(n),this):(e.push(r),r.once("end",o.bind(null,r)),r.once("error",t.emit.bind(t,"error")),r.pipe(t,{end:!1}),this)}function r(){return 0==e.length}function o(n){!(e=e.filter((function(e){return e!==n}))).length&&t.readable&&t.end()}},Dt=async(e,t)=>{if(e){e.destroy();try{return await t}catch(e){return e.bufferedData}}},Ft=(e,{encoding:t,buffer:n,maxBuffer:r})=>{if(e&&n)return t?Rt(e,{encoding:t,maxBuffer:r}):Rt.buffer(e,{maxBuffer:r})};var Ut={handleInput:(e,t)=>{void 0!==t&&void 0!==e.stdin&&(Mt(t)?t.pipe(e.stdin):e.stdin.end(t))},makeAllStream:(e,{all:t})=>{if(!t||!e.stdout&&!e.stderr)return;const n=Bt();return e.stdout&&n.add(e.stdout),e.stderr&&n.add(e.stderr),n},getSpawnedResult:async({stdout:e,stderr:t,all:n},{encoding:r,buffer:o,maxBuffer:i},a)=>{const s=Ft(e,{encoding:r,buffer:o,maxBuffer:i}),c=Ft(t,{encoding:r,buffer:o,maxBuffer:i}),u=Ft(n,{encoding:r,buffer:o,maxBuffer:2*i});try{return await Promise.all([a,s,c,u])}catch(r){return Promise.all([{error:r,signal:r.signal,timedOut:r.timedOut},Dt(e,s),Dt(t,c),Dt(n,u)])}},validateInputSync:({input:e})=>{if(Mt(e))throw new TypeError("The `input` option cannot be a stream in sync mode")}};const qt=(async()=>{})().constructor.prototype,Wt=["then","catch","finally"].map((e=>[e,Reflect.getOwnPropertyDescriptor(qt,e)]));var zt={mergePromise:(e,t)=>{for(const[n,r]of Wt){const o="function"==typeof t?(...e)=>Reflect.apply(r.value,t(),e):r.value.bind(t);Reflect.defineProperty(e,n,{...r,value:o})}return e},getSpawnedPromise:e=>new Promise(((t,n)=>{e.on("exit",((e,n)=>{t({exitCode:e,signal:n})})),e.on("error",(e=>{n(e)})),e.stdin&&e.stdin.on("error",(e=>{n(e)}))}))};const Kt=(e,t=[])=>Array.isArray(t)?[e,...t]:[e],Ht=/^[\w.-]+$/,Vt=/"/g,Xt=/ +/g;var Yt={joinCommand:(e,t)=>Kt(e,t).join(" "),getEscapedCommand:(e,t)=>Kt(e,t).map((e=>(e=>"string"!=typeof e||Ht.test(e)?e:`"${e.replace(Vt,'\\"')}"`)(e))).join(" "),parseCommand:e=>{const t=[];for(const n of e.trim().split(Xt)){const e=t[t.length-1];e&&e.endsWith("\\")?t[t.length-1]=`${e.slice(0,-1)} ${n}`:t.push(n)}return t}};const Jt=d.default,Qt=p.default,Zt=C.exports,en=e=>{const t="string"==typeof e?"\n":"\n".charCodeAt(),n="string"==typeof e?"\r":"\r".charCodeAt();return e[e.length-1]===t&&(e=e.slice(0,e.length-1)),e[e.length-1]===n&&(e=e.slice(0,e.length-1)),e},tn=Pe.exports,nn=Te.exports,rn=Je,on=Qe.exports,{spawnedKill:an,spawnedCancel:sn,setupTimeout:cn,validateTimeout:un,setExitHandler:ln}=Pt,{handleInput:dn,getSpawnedResult:pn,makeAllStream:fn,validateInputSync:mn}=Ut,{mergePromise:gn,getSpawnedPromise:hn}=zt,{joinCommand:yn,parseCommand:vn,getEscapedCommand:wn}=Yt,bn=(e,t,n={})=>{const r=Zt._parse(e,t,n);return e=r.command,t=r.args,(n={maxBuffer:1e8,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:(n=r.options).cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...n}).env=(({env:e,extendEnv:t,preferLocal:n,localDir:r,execPath:o})=>{const i=t?{...process.env,...e}:e;return n?tn.env({env:i,cwd:r,execPath:o}):i})(n),n.stdio=on(n),"win32"===process.platform&&"cmd"===Jt.basename(e,".exe")&&t.unshift("/q"),{file:e,args:t,options:n,parsed:r}},xn=(e,t,n)=>"string"==typeof t||Buffer.isBuffer(t)?e.stripFinalNewline?en(t):t:void 0===n?void 0:"",Sn=(e,t,n)=>{const r=bn(e,t,n),o=yn(e,t),i=wn(e,t);let a;un(r.options);try{a=Qt.spawn(r.file,r.args,r.options)}catch(e){const t=new Qt.ChildProcess,n=Promise.reject(rn({error:e,stdout:"",stderr:"",all:"",command:o,escapedCommand:i,parsed:r,timedOut:!1,isCanceled:!1,killed:!1}));return gn(t,n)}const s=hn(a),c=cn(a,r.options,s),u=ln(a,r.options,c),l={isCanceled:!1};a.kill=an.bind(null,a.kill.bind(a)),a.cancel=sn.bind(null,a,l);const d=nn((async()=>{const[{error:e,exitCode:t,signal:n,timedOut:s},c,d,p]=await pn(a,r.options,u),f=xn(r.options,c),m=xn(r.options,d),g=xn(r.options,p);if(e||0!==t||null!==n){const c=rn({error:e,exitCode:t,signal:n,stdout:f,stderr:m,all:g,command:o,escapedCommand:i,parsed:r,timedOut:s,isCanceled:l.isCanceled,killed:a.killed});if(!r.options.reject)return c;throw c}return{command:o,escapedCommand:i,exitCode:0,stdout:f,stderr:m,all:g,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}}));return dn(a,r.options.input),a.all=fn(a,r.options),gn(a,d)};I.exports=Sn,I.exports.sync=(e,t,n)=>{const r=bn(e,t,n),o=yn(e,t),i=wn(e,t);let a;mn(r.options);try{a=Qt.spawnSync(r.file,r.args,r.options)}catch(e){throw rn({error:e,stdout:"",stderr:"",all:"",command:o,escapedCommand:i,parsed:r,timedOut:!1,isCanceled:!1,killed:!1})}const s=xn(r.options,a.stdout,a.error),c=xn(r.options,a.stderr,a.error);if(a.error||0!==a.status||null!==a.signal){const e=rn({stdout:s,stderr:c,error:a.error,signal:a.signal,exitCode:a.status,command:o,escapedCommand:i,parsed:r,timedOut:a.error&&"ETIMEDOUT"===a.error.code,isCanceled:!1,killed:null!==a.signal});if(!r.options.reject)return e;throw e}return{command:o,escapedCommand:i,exitCode:0,stdout:s,stderr:c,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}},I.exports.command=(e,t)=>{const[n,...r]=vn(e);return Sn(n,r,t)},I.exports.commandSync=(e,t)=>{const[n,...r]=vn(e);return Sn.sync(n,r,t)},I.exports.node=(e,t,n={})=>{t&&!Array.isArray(t)&&"object"==typeof t&&(n=t,t=[]);const r=on.node(n),o=process.execArgv.filter((e=>!e.startsWith("--inspect"))),{nodePath:i=process.execPath,nodeOptions:a=o}=n;return Sn(i,[...a,e,...Array.isArray(t)?t:[]],{...n,stdin:void 0,stdout:void 0,stderr:void 0,stdio:r,shell:!1})};var En=I.exports,Pn={exports:{}};const Tn=f.default;let kn;var In=()=>(void 0===kn&&(kn=function(){try{return Tn.statSync("/.dockerenv"),!0}catch(e){return!1}}()||function(){try{return Tn.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch(e){return!1}}()),kn);const Cn=m.default,$n=f.default,On=In,jn=()=>{if("linux"!==process.platform)return!1;if(Cn.release().toLowerCase().includes("microsoft"))return!On();try{return!!$n.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")&&!On()}catch(e){return!1}};process.env.__IS_WSL_TEST__?Pn.exports=jn:Pn.exports=jn();const An=d.default,Gn=p.default,{promises:_n,constants:Ln}=f.default,Nn=Pn.exports,Mn=In,Rn=(e,t,n)=>{const r=n=>Object.defineProperty(e,t,{value:n,enumerable:!0,writable:!0});return Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){const e=n();return r(e),e},set(e){r(e)}}),e},Bn=An.join(__dirname,"xdg-open"),{platform:Dn,arch:Fn}=process,Un=(()=>{const e="/mnt/";let t;return async function(){if(t)return t;const n="/etc/wsl.conf";let r=!1;try{await _n.access(n,Ln.F_OK),r=!0}catch{}if(!r)return e;const o=await _n.readFile(n,{encoding:"utf8"}),i=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(o);return i?(t=i.groups.mountPoint.trim(),t=t.endsWith("/")?t:`${t}/`,t):e}})(),qn=async(e,t)=>{let n;for(const r of e)try{return await t(r)}catch(e){n=e}throw n},Wn=async(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a `target`");if(t={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...t},Array.isArray(t.app))return qn(t.app,(n=>Wn(e,{...t,app:n})));let n,{name:r,arguments:o=[]}=t.app||{};if(o=[...o],Array.isArray(r))return qn(r,(n=>Wn(e,{...t,app:{name:n,arguments:o}})));const i=[],a={};if("darwin"===Dn)n="open",t.wait&&i.push("--wait-apps"),t.background&&i.push("--background"),t.newInstance&&i.push("--new"),r&&i.push("-a",r);else if("win32"===Dn||Nn&&!Mn()){const s=await Un();n=Nn?`${s}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","–ExecutionPolicy","Bypass","-EncodedCommand"),Nn||(a.windowsVerbatimArguments=!0);const c=["Start"];t.wait&&c.push("-Wait"),r?(c.push(`"\`"${r}\`""`,"-ArgumentList"),o.unshift(e)):c.push(`"${e}"`),o.length>0&&(o=o.map((e=>`"\`"${e}\`""`)),c.push(o.join(","))),e=Buffer.from(c.join(" "),"utf16le").toString("base64")}else{if(r)n=r;else{const e=!__dirname||"/"===__dirname;let t=!1;try{await _n.access(Bn,Ln.X_OK),t=!0}catch{}n=process.versions.electron||"android"===Dn||e||!t?"xdg-open":Bn}o.length>0&&i.push(...o),t.wait||(a.stdio="ignore",a.detached=!0)}i.push(e),"darwin"===Dn&&o.length>0&&i.push("--args",...o);const s=Gn.spawn(n,i,a);return t.wait?new Promise(((e,n)=>{s.once("error",n),s.once("close",(r=>{t.allowNonzeroExitCode&&r>0?n(new Error(`Exited with code ${r}`)):e(s)}))})):(s.unref(),s)};function zn(e){if("string"==typeof e||Array.isArray(e))return e;const{[Fn]:t}=e;if(!t)throw new Error(`${Fn} is not supported`);return t}function Kn({[Dn]:e},{wsl:t}){if(t&&Nn)return zn(t);if(!e)throw new Error(`${Dn} is not supported`);return zn(e)}const Hn={};Rn(Hn,"chrome",(()=>Kn({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}))),Rn(Hn,"firefox",(()=>Kn({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}))),Rn(Hn,"edge",(()=>Kn({darwin:"microsoft edge",win32:"msedge",linux:"microsoft-edge"},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}))),Wn.apps=Hn;var Vn=Wn,Xn=function(e){return e&&e.Math==Math&&e},Yn=Xn("object"==typeof globalThis&&globalThis)||Xn("object"==typeof window&&window)||Xn("object"==typeof self&&self)||Xn("object"==typeof e.commonjsGlobal&&e.commonjsGlobal)||function(){return this}()||Function("return this")(),Jn={},Qn=function(e){try{return!!e()}catch(e){return!0}},Zn=!Qn((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),er={},tr={}.propertyIsEnumerable,nr=Object.getOwnPropertyDescriptor,rr=nr&&!tr.call({1:2},1);er.f=rr?function(e){var t=nr(this,e);return!!t&&t.enumerable}:tr;var or,ir,ar=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},sr={}.toString,cr=function(e){return sr.call(e).slice(8,-1)},ur=cr,lr="".split,dr=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},pr=Qn((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==ur(e)?lr.call(e,""):Object(e)}:Object,fr=dr,mr=function(e){return pr(fr(e))},gr=function(e){return"object"==typeof e?null!==e:"function"==typeof e},hr=Yn,yr=function(e){return"function"==typeof e?e:void 0},vr=function(e,t){return arguments.length<2?yr(hr[e]):hr[e]&&hr[e][t]},wr=Yn,br=vr("navigator","userAgent")||"",xr=wr.process,Sr=wr.Deno,Er=xr&&xr.versions||Sr&&Sr.version,Pr=Er&&Er.v8;Pr?ir=(or=Pr.split("."))[0]<4?1:or[0]+or[1]:br&&(!(or=br.match(/Edge\/(\d+)/))||or[1]>=74)&&(or=br.match(/Chrome\/(\d+)/))&&(ir=or[1]);var Tr=ir&&+ir,kr=Qn,Ir=!!Object.getOwnPropertySymbols&&!kr((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Tr&&Tr<41})),Cr=Ir&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,$r=vr,Or=Cr?function(e){return"symbol"==typeof e}:function(e){var t=$r("Symbol");return"function"==typeof t&&Object(e)instanceof t},jr=gr,Ar={exports:{}},Gr=Yn,_r=function(e,t){try{Object.defineProperty(Gr,e,{value:t,configurable:!0,writable:!0})}catch(n){Gr[e]=t}return t},Lr=_r,Nr=Yn["__core-js_shared__"]||Lr("__core-js_shared__",{}),Mr=Nr;(Ar.exports=function(e,t){return Mr[e]||(Mr[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.17.2",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"});var Rr=dr,Br=function(e){return Object(Rr(e))},Dr={}.hasOwnProperty,Fr=Object.hasOwn||function(e,t){return Dr.call(Br(e),t)},Ur=0,qr=Math.random(),Wr=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++Ur+qr).toString(36)},zr=Yn,Kr=Ar.exports,Hr=Fr,Vr=Wr,Xr=Ir,Yr=Cr,Jr=Kr("wks"),Qr=zr.Symbol,Zr=Yr?Qr:Qr&&Qr.withoutSetter||Vr,eo=function(e){return Hr(Jr,e)&&(Xr||"string"==typeof Jr[e])||(Xr&&Hr(Qr,e)?Jr[e]=Qr[e]:Jr[e]=Zr("Symbol."+e)),Jr[e]},to=gr,no=Or,ro=function(e,t){var n,r;if("string"===t&&"function"==typeof(n=e.toString)&&!jr(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!jr(r=n.call(e)))return r;if("string"!==t&&"function"==typeof(n=e.toString)&&!jr(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},oo=eo("toPrimitive"),io=function(e,t){if(!to(e)||no(e))return e;var n,r=e[oo];if(void 0!==r){if(void 0===t&&(t="default"),n=r.call(e,t),!to(n)||no(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===t&&(t="number"),ro(e,t)},ao=Or,so=function(e){var t=io(e,"string");return ao(t)?t:String(t)},co=gr,uo=Yn.document,lo=co(uo)&&co(uo.createElement),po=function(e){return lo?uo.createElement(e):{}},fo=!Zn&&!Qn((function(){return 7!=Object.defineProperty(po("div"),"a",{get:function(){return 7}}).a})),mo=Zn,go=er,ho=ar,yo=mr,vo=so,wo=Fr,bo=fo,xo=Object.getOwnPropertyDescriptor;Jn.f=mo?xo:function(e,t){if(e=yo(e),t=vo(t),bo)try{return xo(e,t)}catch(e){}if(wo(e,t))return ho(!go.f.call(e,t),e[t])};var So={},Eo=gr,Po=function(e){if(!Eo(e))throw TypeError(String(e)+" is not an object");return e},To=Zn,ko=fo,Io=Po,Co=so,$o=Object.defineProperty;So.f=To?$o:function(e,t,n){if(Io(e),t=Co(t),Io(n),ko)try{return $o(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var Oo=So,jo=ar,Ao=Zn?function(e,t,n){return Oo.f(e,t,jo(1,n))}:function(e,t,n){return e[t]=n,e},Go={exports:{}},_o=Nr,Lo=Function.toString;"function"!=typeof _o.inspectSource&&(_o.inspectSource=function(e){return Lo.call(e)});var No,Mo,Ro,Bo=_o.inspectSource,Do=Bo,Fo=Yn.WeakMap,Uo="function"==typeof Fo&&/native code/.test(Do(Fo)),qo=Ar.exports,Wo=Wr,zo=qo("keys"),Ko={},Ho=Uo,Vo=gr,Xo=Ao,Yo=Fr,Jo=Nr,Qo=function(e){return zo[e]||(zo[e]=Wo(e))},Zo=Ko,ei=Yn.WeakMap;if(Ho||Jo.state){var ti=Jo.state||(Jo.state=new ei),ni=ti.get,ri=ti.has,oi=ti.set;No=function(e,t){if(ri.call(ti,e))throw new TypeError("Object already initialized");return t.facade=e,oi.call(ti,e,t),t},Mo=function(e){return ni.call(ti,e)||{}},Ro=function(e){return ri.call(ti,e)}}else{var ii=Qo("state");Zo[ii]=!0,No=function(e,t){if(Yo(e,ii))throw new TypeError("Object already initialized");return t.facade=e,Xo(e,ii,t),t},Mo=function(e){return Yo(e,ii)?e[ii]:{}},Ro=function(e){return Yo(e,ii)}}var ai={set:No,get:Mo,has:Ro,enforce:function(e){return Ro(e)?Mo(e):No(e,{})},getterFor:function(e){return function(t){var n;if(!Vo(t)||(n=Mo(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},si=Yn,ci=Ao,ui=Fr,li=_r,di=Bo,pi=ai.get,fi=ai.enforce,mi=String(String).split("String");(Go.exports=function(e,t,n,r){var o,i=!!r&&!!r.unsafe,a=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof t||ui(n,"name")||ci(n,"name",t),(o=fi(n)).source||(o.source=mi.join("string"==typeof t?t:""))),e!==si?(i?!s&&e[t]&&(a=!0):delete e[t],a?e[t]=n:ci(e,t,n)):a?e[t]=n:li(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&pi(this).source||di(this)}));var gi={},hi=Math.ceil,yi=Math.floor,vi=function(e){return isNaN(e=+e)?0:(e>0?yi:hi)(e)},wi=vi,bi=Math.min,xi=function(e){return e>0?bi(wi(e),9007199254740991):0},Si=vi,Ei=Math.max,Pi=Math.min,Ti=mr,ki=xi,Ii=function(e,t){var n=Si(e);return n<0?Ei(n+t,0):Pi(n,t)},Ci=function(e){return function(t,n,r){var o,i=Ti(t),a=ki(i.length),s=Ii(r,a);if(e&&n!=n){for(;a>s;)if((o=i[s++])!=o)return!0}else for(;a>s;s++)if((e||s in i)&&i[s]===n)return e||s||0;return!e&&-1}},$i={includes:Ci(!0),indexOf:Ci(!1)},Oi=Fr,ji=mr,Ai=$i.indexOf,Gi=Ko,_i=function(e,t){var n,r=ji(e),o=0,i=[];for(n in r)!Oi(Gi,n)&&Oi(r,n)&&i.push(n);for(;t.length>o;)Oi(r,n=t[o++])&&(~Ai(i,n)||i.push(n));return i},Li=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"].concat("length","prototype");gi.f=Object.getOwnPropertyNames||function(e){return _i(e,Li)};var Ni={};Ni.f=Object.getOwnPropertySymbols;var Mi=gi,Ri=Ni,Bi=Po,Di=vr("Reflect","ownKeys")||function(e){var t=Mi.f(Bi(e)),n=Ri.f;return n?t.concat(n(e)):t},Fi=Fr,Ui=Di,qi=Jn,Wi=So,zi=Qn,Ki=/#|\.prototype\./,Hi=function(e,t){var n=Xi[Vi(e)];return n==Ji||n!=Yi&&("function"==typeof t?zi(t):!!t)},Vi=Hi.normalize=function(e){return String(e).replace(Ki,".").toLowerCase()},Xi=Hi.data={},Yi=Hi.NATIVE="N",Ji=Hi.POLYFILL="P",Qi=Hi,Zi=Yn,ea=Jn.f,ta=Ao,na=Go.exports,ra=_r,oa=function(e,t){for(var n=Ui(t),r=Wi.f,o=qi.f,i=0;i<n.length;i++){var a=n[i];Fi(e,a)||r(e,a,o(t,a))}},ia=Qi,aa=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},sa={},ca=aa,ua=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=ca(t),this.reject=ca(n)};sa.f=function(e){return new ua(e)};var la={},da=la,pa=eo("iterator"),fa=Array.prototype,ma=aa,ga={};ga[eo("toStringTag")]="z";var ha="[object z]"===String(ga),ya=cr,va=eo("toStringTag"),wa="Arguments"==ya(function(){return arguments}()),ba=ha?ya:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),va))?n:wa?ya(t):"Object"==(r=ya(t))&&"function"==typeof t.callee?"Arguments":r},xa=la,Sa=eo("iterator"),Ea=function(e){if(null!=e)return e[Sa]||e["@@iterator"]||xa[ba(e)]},Pa=Po,Ta=Ea,ka=Po,Ia=Po,Ca=function(e){return void 0!==e&&(da.Array===e||fa[pa]===e)},$a=xi,Oa=function(e,t,n){if(ma(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}},ja=function(e,t){var n=arguments.length<2?Ta(e):t;if("function"!=typeof n)throw TypeError(String(e)+" is not iterable");return Pa(n.call(e))},Aa=Ea,Ga=function(e,t,n){var r,o;ka(e);try{if(void 0===(r=e.return)){if("throw"===t)throw n;return n}r=r.call(e)}catch(e){o=!0,r=e}if("throw"===t)throw n;if(o)throw r;return ka(r),n},_a=function(e,t){this.stopped=e,this.result=t},La=aa,Na=sa,Ma=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Ra=function(e,t,n){var r,o,i,a,s,c,u,l=n&&n.that,d=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),f=!(!n||!n.INTERRUPTED),m=Oa(t,l,1+d+f),g=function(e){return r&&Ga(r,"normal",e),new _a(!0,e)},h=function(e){return d?(Ia(e),f?m(e[0],e[1],g):m(e[0],e[1])):f?m(e,g):m(e)};if(p)r=e;else{if("function"!=typeof(o=Aa(e)))throw TypeError("Target is not iterable");if(Ca(o)){for(i=0,a=$a(e.length);a>i;i++)if((s=h(e[i]))&&s instanceof _a)return s;return new _a(!1)}r=ja(e,o)}for(c=r.next;!(u=c.call(r)).done;){try{s=h(u.value)}catch(e){Ga(r,"throw",e)}if("object"==typeof s&&s&&s instanceof _a)return s}return new _a(!1)};async function Ba(t,n,r=[]){const o=(new Date).getTime(),i=atom.packages.getApmPath(),a=`Package Control is ${Ua(t).continous.toLowerCase()} the ${n} package`;e.Logger.log(`${Ua(t).continous} ${n} package`),e.Signal.add(a);try{await En(i,[t,n,...r])}catch(n){return e.Logger.error(`${Ua(t).noun} failed: ${n.shortMessage}`),e.Signal.add(`${Ua(t).noun} failed: ${n.shortMessage}`),atom.notifications.addError(`**Package Control**: ${Ua(t).noun} failed`,{detail:n.shortMessage,dismissable:!0}),void e.Signal.remove(a)}const s=(new Date).getTime()-o;e.Logger.log(`${Ua(t).perfect} ${n} in ${s/1e3} seconds`),e.Signal.remove(a)}function Da(e,t){return e.sort(((e,n)=>e[t].localeCompare(n[t])))}function Fa(e,t){return e.sort(((e,n)=>n[t]-e[t]))}function Ua(e){switch(e){case"install":case"stars":return{continous:"Installing",noun:"Installation",perfect:"Installed"};case"remove":return{continous:"Removing",noun:"Removal",perfect:"Removed"};case"enable":return{continous:"Enabling",noun:"Enabling",perfect:"Enabled"};case"disable":return{continous:"Disabling",noun:"Disabling",perfect:"Disabled"};case"list":return{continous:"Listing",noun:"Listing",perfect:"Listed"};case"satisfy":return{continous:"Satisfying",noun:"Satisfying",perfect:"Satisfied"};case"update":return{continous:"Updating",noun:"Update",perfect:"Updated"};default:throw Error(`Unsupported action: ${e}`)}}function qa(){const t=String(e.config.get("githubUser")).trim();return t?.length?["--user",t]:[]}function Wa(e){return e.startsWith("v")?e:`v${e}`}(function(e,t){var n,r,o,i,a,s=e.target,c=e.global,u=e.stat;if(n=c?Zi:u?Zi[s]||ra(s,{}):(Zi[s]||{}).prototype)for(r in t){if(i=t[r],o=e.noTargetGet?(a=ea(n,r))&&a.value:n[r],!ia(c?r:s+(u?".":"#")+r,e.forced)&&void 0!==o){if(typeof i==typeof o)continue;oa(i,o)}(e.sham||o&&o.sham)&&ta(i,"sham",!0),na(n,r,i,e)}})({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=Na.f(t),r=n.resolve,o=n.reject,i=Ma((function(){var n=La(t.resolve),o=[],i=0,a=1;Ra(e,(function(e){var s=i++,c=!1;o.push(void 0),a++,n.call(t,e).then((function(e){c||(c=!0,o[s]={status:"fulfilled",value:e},--a||r(o))}),(function(e){c||(c=!0,o[s]={status:"rejected",reason:e},--a||r(o))}))})),--a||r(o)}));return i.error&&o(i.value),n.promise}});var za=Object.freeze({__proto__:null,createList:async function(t){const n=await Ha(t);if(void 0===n)return;let r,o;const i=atom.packages.getAvailablePackageNames(),a=i.filter((e=>!atom.packages.isPackageDisabled(e))),s=i.filter((e=>atom.packages.isPackageDisabled(e)));switch("stars"===t&&(o=await async function(){const t="Package Control is retrieving starred packages";e.Logger.log("Retrieving starred packages"),e.Signal.add(t);const n=atom.packages.getApmPath();let r;try{r=await En(n,["stars","--json",...qa()])}catch(e){throw Error(e.message)}finally{e.Signal.remove(t)}return JSON.parse(r.stdout).map((e=>e.name))||[]}()),t){case"install":r=n.filter((e=>!i.includes(e.name)));break;case"enable":r=n.filter((e=>i.includes(e.name)&&s.includes(e.name)));break;case"disable":r=n.filter((e=>i.includes(e.name)&&a.includes(e.name)));break;case"stars":r=n.filter((e=>!i.includes(e.name)&&o.includes(e.name)));break;case"update":r=await async function(t){const n="Package Control is retrieving outdated packages";e.Logger.log("Retrieving outdated packages"),e.Signal.add(n);const r=atom.packages.getApmPath();let o;try{o=await En(r,["update","--compatible","--json","--list"])}catch(e){throw Error(e.message)}finally{e.Signal.remove(n)}return JSON.parse(o.stdout).map((({name:e,version:n,latestVersion:r})=>{const o=t.filter((t=>t.name===e))[0];return{description:o.description||"",downloads:o.downloads||0,name:e,stars:o.stars||0,theme:o.theme||void 0,version:`${Wa(n)} &#8594; ${Wa(r)}`}}))||[]}(n);break;default:r=n.filter((e=>i.includes(e.name)))}if(!r.length){const n="stars"===t?"install":t;return e.Logger.log(`No packages to ${n}`),void atom.notifications.addInfo(`**Package Control**: No packages to ${n}`)}let c;try{c=await async function(t){let n;const r=document.activeElement,o=(await Promise.resolve().then((function(){return require("./select-list-view-91a3ed5b.js")})).then((function(e){return e.selectListView}))).default,i=(await Promise.resolve().then((function(){return require("./approximate-number-d75c4921.js")})).then((function(e){return e.approximateNumber}))).default;try{return await new Promise(((r,a)=>{const s=new o({didCancelSelection:()=>a("cancelled"),didConfirmSelection:e=>r(e.name),elementForItem:t=>{const n=document.createElement("li"),r=t.version?Wa(t.version):"",o=t.downloads?`${i(t.downloads,k)}`:"",a=t.stars?`${i(t.stars,k)}`:"",s=t.theme?"ui"===t.theme?"browser":"paintcan":"code",c=e.config.get("ui"),u="normal"!==c.packageTextStyle?`text-${c.packageTextStyle}`:"",l="normal"!==c.versionTextStyle?`text-${c.versionTextStyle}`:"",d="normal"!==c.statsTextStyle?`text-${c.statsTextStyle}`:"",p="normal"!==c.descriptionTextStyle?`text-${c.descriptionTextStyle}`:"",f=c.showPackageTypeIcon?`icon icon-${s}`:"",m=c.showPackageStats?`\n              <div class="pull-right ${d}">\n                <span class="icon icon-cloud-download">${o}</span>\n                <span class="icon icon-star">${a}</span>\n              </div>\n            `:"";return n.innerHTML=`\n            <div class="package-control block">\n              ${m}\n\n              <span class="${f}">\n                <strong class="${u}">${t.name}</strong>\n                <span class="${l}">${r}</span>\n                <div class="truncate-text ${p}">${t.description||""}</div>\n              </span>\n            </div>\n          `,n},emptyMessage:"No packages found",filterKeyForItem:e=>e.name,items:t,maxResults:Number(e.config.get("maxResults")),selectQuery:!0});n=atom.workspace.addModalPanel({item:s,visible:!0}),s.focus()}))}finally{n&&n.destroy(),r&&r.focus()}}(r)}catch(t){return void e.Logger.log("Closed list view:",t)}if(void 0!==c)switch(t){case"install":case"remove":case"disable":case"enable":await Ba(t,c);break;case"stars":Ba("install",c);break;case"update":await Ba(t,c,["--compatible","--no-confirm"]);break;case"list":e.Browse.reveal(c)}},installAllStars:async function(){const t="Package Control is installing all starred packages",n=(new Date).getTime(),r="install",o=atom.packages.getApmPath();e.Logger.log(`${Ua(r).continous} all packages`),e.Signal.add(t);try{await En(o,["stars","--install",...qa()])}catch(n){return e.Logger.error(`${Ua(r).continous} all starred packages failed: ${n.shortMessage}`),atom.notifications.addError(`**Package Control**: ${Ua(r).continous} all starred packages failed`,{detail:n.shortMessage,dismissable:!0}),void e.Signal.remove(t)}const i=(new Date).getTime()-n;e.Logger.log(`${Ua(r).perfect} all starred packages in ${i/1e3} seconds`),e.Signal.remove(t)},normalizeVersion:Wa,openWebsite:async function(t){e.Logger.log(`Opening https://atom.io/${t}`),await Vn(`https://atom.io/${t}`)},satisfyDependencies:async function(){const t="Package Control is satisfying all package dependencies",n=(new Date).getTime(),r="satisfy",o=atom.packages.getLoadedPackages().map((e=>e.name));e.Logger.log(`${Ua(r).continous} all packages dependencies`),e.Signal.add(t);const i=(await Promise.resolve().then((function(){return require("./index-254fbdfb.js")})).then((function(e){return e.index}))).install;await Promise.allSettled(o.map((async t=>await i(t,!e.config.get("confirmSatisfyingDependencies")))));const a=(new Date).getTime()-n;e.Logger.log(`${Ua(r).perfect} all packages in ${a/1e3} seconds`),e.Signal.remove(t)},sortByName:Da,sortByCount:Fa,updateAll:async function(){const t="Package Control updating all packages",n=(new Date).getTime(),r="update",o=atom.packages.getApmPath();e.Logger.log(`${Ua(r).continous} all packages`),e.Signal.add(t);try{await En(o,["update","--no-confirm"])}catch(n){return e.Logger.error(`${Ua(r).continous} all packages failed: ${n.shortMessage}`),atom.notifications.addError(`**Package Control**: ${Ua(r).continous} all packages failed`,{detail:n.shortMessage,dismissable:!0}),void e.Signal.remove(t)}const i=(new Date).getTime()-n;e.Logger.log(`${Ua(r).perfect} all packages in ${i/1e3} seconds`),e.Signal.remove(t)}});const Ka=x("package-control","1.0.0");async function Ha(t){const{get:n}=await Promise.resolve().then((function(){return T})),r=await n("packagesCache",Ka)||{};if(!Object.keys(r).length)return await Xa(),await Ha(t);const o=String(e.config.get("sortPackages"));switch(t){case"install":return"name"===o?Da(r,o):Fa(r,o);default:return Da(r,"name")}}async function Va(t,n){const r=(new Date).toISOString();e.Logger.log("Saving package cache",{length:t.length,lastUpdate:r,checksums:n||{}});const{set:o}=await Promise.resolve().then((function(){return T}));await o("packagesCache",t,Ka),await o("lastUpdate",r,Ka),await o("checksums",n,Ka)}async function Xa(){const{differenceInMinutes:t}=await Promise.resolve().then((function(){return require("./index-146b2aa2.js")})),{get:n}=await Promise.resolve().then((function(){return T})),r=await n("lastUpdate",Ka)||0,o=t(new Date,new Date(r));if(o<Number(e.config.get("updateInterval")))return void e.Logger.log(`Skipping package retrieval, last update was ${o} minutes ago`);e.Logger.log("Downloading packages list");const i=await e.Fetch.getPackageData();if(i.ok){const e=(await Promise.resolve().then((function(){return require("./index-8e32bd79.js")})).then((function(e){return e.index}))).ungzip(await i.arrayBuffer()),t=JSON.parse((new TextDecoder).decode(e)),n=i.checksums||{};await Va(t,n)}}var Ya=Object.freeze({__proto__:null,fetchPackages:Xa,getPackages:Ha,setPackages:Va});exports.api=Ya,exports.util=za;
//# sourceMappingURL=api-fa4f82eb.js.map

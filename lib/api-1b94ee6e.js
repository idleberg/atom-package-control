"use strict";var e=require("./index-cf105e8b.js"),t=require("path"),n=require("child_process"),r=require("fs"),o=require("os"),a=require("assert"),i=require("events"),s=require("buffer"),c=require("stream"),u=require("util");function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var d=l(t),p=l(n),f=l(r),m=l(o),g=l(a),h=l(i),y=l(s),v=l(c),w=l(u);function b(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function x(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=b(n);return(e,n)=>r.then((r=>n(r.transaction(t,e).objectStore(t))))}let S;function E(){return S||(S=x("keyval-store","keyval")),S}function P(e,t){return e("readonly",(e=>(e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},b(e.transaction))))}var T=Object.freeze({__proto__:null,clear:function(e=E()){return e("readwrite",(e=>(e.clear(),b(e.transaction))))},createStore:x,del:function(e,t=E()){return t("readwrite",(t=>(t.delete(e),b(t.transaction))))},entries:function(e=E()){const t=[];return P(e,(e=>t.push([e.key,e.value]))).then((()=>t))},get:function(e,t=E()){return t("readonly",(t=>b(t.get(e))))},getMany:function(e,t=E()){return t("readonly",(t=>Promise.all(e.map((e=>b(t.get(e)))))))},keys:function(e=E()){const t=[];return P(e,(e=>t.push(e.key))).then((()=>t))},promisifyRequest:b,set:function(e,t,n=E()){return n("readwrite",(n=>(n.put(t,e),b(n.transaction))))},setMany:function(e,t=E()){return t("readwrite",(t=>(e.forEach((e=>t.put(e[1],e[0]))),b(t.transaction))))},update:function(e,t,n=E()){return n("readwrite",(n=>new Promise(((r,o)=>{n.get(e).onsuccess=function(){try{n.put(t(this.result),e),r(b(n.transaction))}catch(e){o(e)}}}))))},values:function(e=E()){const t=[];return P(e,(e=>t.push(e.value))).then((()=>t))}});const k={average:!0,mantissa:1,optionalMantissa:!0};var I={exports:{}},C={exports:{}},$=A;A.sync=function(e,t){return j(O.statSync(e),e,t)};var O=f.default;function j(e,t,n){return!(!e.isSymbolicLink()&&!e.isFile())&&function(e,t){var n=void 0!==t.pathExt?t.pathExt:process.env.PATHEXT;if(!n)return!0;if(-1!==(n=n.split(";")).indexOf(""))return!0;for(var r=0;r<n.length;r++){var o=n[r].toLowerCase();if(o&&e.substr(-o.length).toLowerCase()===o)return!0}return!1}(t,n)}function A(e,t,n){O.stat(e,(function(r,o){n(r,!r&&j(o,e,t))}))}var G=N;N.sync=function(e,t){return M(L.statSync(e),t)};var _,L=f.default;function N(e,t,n){L.stat(e,(function(e,r){n(e,!e&&M(r,t))}))}function M(e,t){return e.isFile()&&function(e,t){var n=e.mode,r=e.uid,o=e.gid,a=void 0!==t.uid?t.uid:process.getuid&&process.getuid(),i=void 0!==t.gid?t.gid:process.getgid&&process.getgid(),s=parseInt("100",8),c=parseInt("010",8),u=parseInt("001",8),l=s|c;return n&u||n&c&&o===i||n&s&&r===a||n&l&&0===a}(e,t)}_="win32"===process.platform||e.commonjsGlobal.TESTING_WINDOWS?$:G;var R=B;function B(e,t,n){if("function"==typeof t&&(n=t,t={}),!n){if("function"!=typeof Promise)throw new TypeError("callback not provided");return new Promise((function(n,r){B(e,t||{},(function(e,t){e?r(e):n(t)}))}))}_(e,t||{},(function(e,r){e&&("EACCES"===e.code||t&&t.ignoreErrors)&&(e=null,r=!1),n(e,r)}))}B.sync=function(e,t){try{return _.sync(e,t||{})}catch(e){if(t&&t.ignoreErrors||"EACCES"===e.code)return!1;throw e}};const D="win32"===process.platform||"cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,F=d.default,U=D?";":":",q=R,W=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),z=(e,t)=>{const n=t.colon||U,r=e.match(/\//)||D&&e.match(/\\/)?[""]:[...D?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(n)],o=D?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",a=D?o.split(n):[""];return D&&-1!==e.indexOf(".")&&""!==a[0]&&a.unshift(""),{pathEnv:r,pathExt:a,pathExtExe:o}},K=(e,t,n)=>{"function"==typeof t&&(n=t,t={}),t||(t={});const{pathEnv:r,pathExt:o,pathExtExe:a}=z(e,t),i=[],s=n=>new Promise(((o,a)=>{if(n===r.length)return t.all&&i.length?o(i):a(W(e));const s=r[n],u=/^".*"$/.test(s)?s.slice(1,-1):s,l=F.join(u,e),d=!u&&/^\.[\\\/]/.test(e)?e.slice(0,2)+l:l;o(c(d,n,0))})),c=(e,n,r)=>new Promise(((u,l)=>{if(r===o.length)return u(s(n+1));const d=o[r];q(e+d,{pathExt:a},((o,a)=>{if(!o&&a){if(!t.all)return u(e+d);i.push(e+d)}return u(c(e,n,r+1))}))}));return n?s(0).then((e=>n(null,e)),n):s(0)};var H=K;K.sync=(e,t)=>{t=t||{};const{pathEnv:n,pathExt:r,pathExtExe:o}=z(e,t),a=[];for(let i=0;i<n.length;i++){const s=n[i],c=/^".*"$/.test(s)?s.slice(1,-1):s,u=F.join(c,e),l=!c&&/^\.[\\\/]/.test(e)?e.slice(0,2)+u:u;for(let e=0;e<r.length;e++){const n=l+r[e];try{if(q.sync(n,{pathExt:o})){if(!t.all)return n;a.push(n)}}catch(e){}}}if(t.all&&a.length)return a;if(t.nothrow)return null;throw W(e)};var V={exports:{}};const X=(e={})=>{const t=e.env||process.env;return"win32"!==(e.platform||process.platform)?"PATH":Object.keys(t).reverse().find((e=>"PATH"===e.toUpperCase()))||"Path"};V.exports=X,V.exports.default=X;const Y=d.default,J=H,Q=V.exports;function Z(e,t){const n=e.options.env||process.env,r=process.cwd(),o=null!=e.options.cwd,a=o&&void 0!==process.chdir&&!process.chdir.disabled;if(a)try{process.chdir(e.options.cwd)}catch(e){}let i;try{i=J.sync(e.command,{path:n[Q({env:n})],pathExt:t?Y.delimiter:void 0})}catch(e){}finally{a&&process.chdir(r)}return i&&(i=Y.resolve(o?e.options.cwd:"",i)),i}var ee=function(e){return Z(e)||Z(e,!0)},te={};const ne=/([()\][%!^"`<>&|;, *?])/g;te.command=function(e){return e=e.replace(ne,"^$1")},te.argument=function(e,t){return e=(e=`"${e=(e=(e=`${e}`).replace(/(\\*)"/g,'$1$1\\"')).replace(/(\\*)$/,"$1$1")}"`).replace(ne,"^$1"),t&&(e=e.replace(ne,"^$1")),e};const re=/^#!(.*)/;const oe=f.default,ae=(e="")=>{const t=e.match(re);if(!t)return null;const[n,r]=t[0].replace(/#! ?/,"").split(" "),o=n.split("/").pop();return"env"===o?r:r?`${o} ${r}`:o};var ie=function(e){const t=Buffer.alloc(150);let n;try{n=oe.openSync(e,"r"),oe.readSync(n,t,0,150,0),oe.closeSync(n)}catch(e){}return ae(t.toString())};const se=d.default,ce=ee,ue=te,le=ie,de="win32"===process.platform,pe=/\.(?:com|exe)$/i,fe=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function me(e){if(!de)return e;const t=function(e){e.file=ce(e);const t=e.file&&le(e.file);return t?(e.args.unshift(e.file),e.command=t,ce(e)):e.file}(e),n=!pe.test(t);if(e.options.forceShell||n){const n=fe.test(t);e.command=se.normalize(e.command),e.command=ue.command(e.command),e.args=e.args.map((e=>ue.argument(e,n)));const r=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${r}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}var ge=function(e,t,n){t&&!Array.isArray(t)&&(n=t,t=null);const r={command:e,args:t=t?t.slice(0):[],options:n=Object.assign({},n),file:void 0,original:{command:e,args:t}};return n.shell?r:me(r)};const he="win32"===process.platform;function ye(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function ve(e,t){return he&&1===e&&!t.file?ye(t.original,"spawn"):null}var we={hookChildProcess:function(e,t){if(!he)return;const n=e.emit;e.emit=function(r,o){if("exit"===r){const r=ve(o,t);if(r)return n.call(e,"error",r)}return n.apply(e,arguments)}},verifyENOENT:ve,verifyENOENTSync:function(e,t){return he&&1===e&&!t.file?ye(t.original,"spawnSync"):null},notFoundError:ye};const be=p.default,xe=ge,Se=we;function Ee(e,t,n){const r=xe(e,t,n),o=be.spawn(r.command,r.args,r.options);return Se.hookChildProcess(o,r),o}C.exports=Ee,C.exports.spawn=Ee,C.exports.sync=function(e,t,n){const r=xe(e,t,n),o=be.spawnSync(r.command,r.args,r.options);return o.error=o.error||Se.verifyENOENTSync(o.status,r),o},C.exports._parse=xe,C.exports._enoent=Se;var Pe={exports:{}};!function(e){const t=d.default,n=V.exports,r=e=>{let r;e={cwd:process.cwd(),path:process.env[n()],execPath:process.execPath,...e};let o=t.resolve(e.cwd);const a=[];for(;r!==o;)a.push(t.join(o,"node_modules/.bin")),r=o,o=t.resolve(o,"..");const i=t.resolve(e.cwd,e.execPath,"..");return a.push(i),a.concat(e.path).join(t.delimiter)};e.exports=r,e.exports.default=r,e.exports.env=t=>{const r={...(t={env:process.env,...t}).env},o=n({env:r});return t.path=r[o],r[o]=e.exports(t),r}}(Pe);var Te={exports:{}},ke={exports:{}};const Ie=(e,t)=>{for(const n of Reflect.ownKeys(t))Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n));return e};ke.exports=Ie,ke.exports.default=Ie;const Ce=ke.exports,$e=new WeakMap,Oe=(e,t={})=>{if("function"!=typeof e)throw new TypeError("Expected a function");let n,r=0;const o=e.displayName||e.name||"<anonymous>",a=function(...i){if($e.set(a,++r),1===r)n=e.apply(this,i),e=null;else if(!0===t.throw)throw new Error(`Function \`${o}\` can only be called once`);return n};return Ce(a,e),$e.set(a,r),a};Te.exports=Oe,Te.exports.default=Oe,Te.exports.callCount=e=>{if(!$e.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return $e.get(e)};var je={},Ae={},Ge={};Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.SIGNALS=void 0;Ge.SIGNALS=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];var _e={};Object.defineProperty(_e,"__esModule",{value:!0}),_e.SIGRTMAX=_e.getRealtimeSignals=void 0;_e.getRealtimeSignals=function(){const e=Me-Ne+1;return Array.from({length:e},Le)};const Le=function(e,t){return{name:`SIGRT${t+1}`,number:Ne+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},Ne=34,Me=64;_e.SIGRTMAX=Me,Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.getSignals=void 0;var Re=m.default,Be=Ge,De=_e;Ae.getSignals=function(){const e=(0,De.getRealtimeSignals)();return[...Be.SIGNALS,...e].map(Fe)};const Fe=function({name:e,number:t,description:n,action:r,forced:o=!1,standard:a}){const{signals:{[e]:i}}=Re.constants,s=void 0!==i;return{name:e,number:s?i:t,description:n,supported:s,action:r,forced:o,standard:a}};Object.defineProperty(je,"__esModule",{value:!0}),je.signalsByNumber=je.signalsByName=void 0;var Ue=m.default,qe=Ae,We=_e;const ze=function(e,{name:t,number:n,description:r,supported:o,action:a,forced:i,standard:s}){return{...e,[t]:{name:t,number:n,description:r,supported:o,action:a,forced:i,standard:s}}},Ke=(0,qe.getSignals)().reduce(ze,{});je.signalsByName=Ke;const He=function(e,t){const n=Ve(e,t);if(void 0===n)return{};const{name:r,description:o,supported:a,action:i,forced:s,standard:c}=n;return{[e]:{name:r,number:e,description:o,supported:a,action:i,forced:s,standard:c}}},Ve=function(e,t){const n=t.find((({name:t})=>Ue.constants.signals[t]===e));return void 0!==n?n:t.find((t=>t.number===e))},Xe=function(){const e=(0,qe.getSignals)(),t=We.SIGRTMAX+1,n=Array.from({length:t},((t,n)=>He(n,e)));return Object.assign({},...n)}();je.signalsByNumber=Xe;const{signalsByName:Ye}=je;var Je=({stdout:e,stderr:t,all:n,error:r,signal:o,exitCode:a,command:i,escapedCommand:s,timedOut:c,isCanceled:u,killed:l,parsed:{options:{timeout:d}}})=>{a=null===a?void 0:a;const p=void 0===(o=null===o?void 0:o)?void 0:Ye[o].description,f=`Command ${(({timedOut:e,timeout:t,errorCode:n,signal:r,signalDescription:o,exitCode:a,isCanceled:i})=>e?`timed out after ${t} milliseconds`:i?"was canceled":void 0!==n?`failed with ${n}`:void 0!==r?`was killed with ${r} (${o})`:void 0!==a?`failed with exit code ${a}`:"failed")({timedOut:c,timeout:d,errorCode:r&&r.code,signal:o,signalDescription:p,exitCode:a,isCanceled:u})}: ${i}`,m="[object Error]"===Object.prototype.toString.call(r),g=m?`${f}\n${r.message}`:f,h=[g,t,e].filter(Boolean).join("\n");return m?(r.originalMessage=r.message,r.message=h):r=new Error(h),r.shortMessage=g,r.command=i,r.escapedCommand=s,r.exitCode=a,r.signal=o,r.signalDescription=p,r.stdout=e,r.stderr=t,void 0!==n&&(r.all=n),"bufferedData"in r&&delete r.bufferedData,r.failed=!0,r.timedOut=Boolean(c),r.isCanceled=u,r.killed=l&&!c,r},Qe={exports:{}};const Ze=["stdin","stdout","stderr"],et=e=>{if(!e)return;const{stdio:t}=e;if(void 0===t)return Ze.map((t=>e[t]));if((e=>Ze.some((t=>void 0!==e[t])))(e))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${Ze.map((e=>`\`${e}\``)).join(", ")}`);if("string"==typeof t)return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);const n=Math.max(t.length,Ze.length);return Array.from({length:n},((e,n)=>t[n]))};Qe.exports=et,Qe.exports.node=e=>{const t=et(e);return"ipc"===t?"ipc":void 0===t||"string"==typeof t?[t,t,t,"ipc"]:t.includes("ipc")?t:[...t,"ipc"]};var tt,nt={exports:{}},rt={exports:{}};(tt=rt).exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"],"win32"!==process.platform&&tt.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),"linux"===process.platform&&tt.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED");var ot,at=g.default,it=rt.exports,st=/^win/i.test(process.platform),ct=h.default;function ut(){pt&&(pt=!1,it.forEach((function(e){try{process.removeListener(e,dt[e])}catch(e){}})),process.emit=ht,process.reallyExit=mt,ot.count-=1)}function lt(e,t,n){ot.emitted[e]||(ot.emitted[e]=!0,ot.emit(e,t,n))}"function"!=typeof ct&&(ct=ct.EventEmitter),process.__signal_exit_emitter__?ot=process.__signal_exit_emitter__:((ot=process.__signal_exit_emitter__=new ct).count=0,ot.emitted={}),ot.infinite||(ot.setMaxListeners(1/0),ot.infinite=!0),nt.exports=function(e,t){at.equal(typeof e,"function","a callback must be provided for exit handler"),!1===pt&&ft();var n="exit";t&&t.alwaysLast&&(n="afterexit");return ot.on(n,e),function(){ot.removeListener(n,e),0===ot.listeners("exit").length&&0===ot.listeners("afterexit").length&&ut()}},nt.exports.unload=ut;var dt={};it.forEach((function(e){dt[e]=function(){process.listeners(e).length===ot.count&&(ut(),lt("exit",null,e),lt("afterexit",null,e),st&&"SIGHUP"===e&&(e="SIGINT"),process.kill(process.pid,e))}})),nt.exports.signals=function(){return it},nt.exports.load=ft;var pt=!1;function ft(){pt||(pt=!0,ot.count+=1,it=it.filter((function(e){try{return process.on(e,dt[e]),!0}catch(e){return!1}})),process.emit=yt,process.reallyExit=gt)}var mt=process.reallyExit;function gt(e){process.exitCode=e||0,lt("exit",process.exitCode,null),lt("afterexit",process.exitCode,null),mt.call(process,process.exitCode)}var ht=process.emit;function yt(e,t){if("exit"===e){void 0!==t&&(process.exitCode=t);var n=ht.apply(this,arguments);return lt("exit",process.exitCode,null),lt("afterexit",process.exitCode,null),n}return ht.apply(this,arguments)}const vt=m.default,wt=nt.exports,bt=(e,t,n,r)=>{if(!xt(t,n,r))return;const o=Et(n),a=setTimeout((()=>{e("SIGKILL")}),o);a.unref&&a.unref()},xt=(e,{forceKillAfterTimeout:t},n)=>St(e)&&!1!==t&&n,St=e=>e===vt.constants.signals.SIGTERM||"string"==typeof e&&"SIGTERM"===e.toUpperCase(),Et=({forceKillAfterTimeout:e=!0})=>{if(!0===e)return 5e3;if(!Number.isFinite(e)||e<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e};var Pt={spawnedKill:(e,t="SIGTERM",n={})=>{const r=e(t);return bt(e,t,n,r),r},spawnedCancel:(e,t)=>{e.kill()&&(t.isCanceled=!0)},setupTimeout:(e,{timeout:t,killSignal:n="SIGTERM"},r)=>{if(0===t||void 0===t)return r;let o;const a=new Promise(((r,a)=>{o=setTimeout((()=>{((e,t,n)=>{e.kill(t),n(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))})(e,n,a)}),t)})),i=r.finally((()=>{clearTimeout(o)}));return Promise.race([a,i])},validateTimeout:({timeout:e})=>{if(void 0!==e&&(!Number.isFinite(e)||e<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)},setExitHandler:async(e,{cleanup:t,detached:n},r)=>{if(!t||n)return r;const o=wt((()=>{e.kill()}));return r.finally((()=>{o()}))}};const Tt=e=>null!==e&&"object"==typeof e&&"function"==typeof e.pipe;Tt.writable=e=>Tt(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState,Tt.readable=e=>Tt(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState,Tt.duplex=e=>Tt.writable(e)&&Tt.readable(e),Tt.transform=e=>Tt.duplex(e)&&"function"==typeof e._transform&&"object"==typeof e._transformState;var kt=Tt,It={exports:{}};const{PassThrough:Ct}=v.default;const{constants:$t}=y.default,Ot=v.default,{promisify:jt}=w.default,At=e=>{e={...e};const{array:t}=e;let{encoding:n}=e;const r="buffer"===n;let o=!1;t?o=!(n||r):n=n||"utf8",r&&(n=null);const a=new Ct({objectMode:o});n&&a.setEncoding(n);let i=0;const s=[];return a.on("data",(e=>{s.push(e),o?i=s.length:i+=e.length})),a.getBufferedValue=()=>t?s:r?Buffer.concat(s,i):s.join(""),a.getBufferedLength=()=>i,a},Gt=jt(Ot.pipeline);class _t extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}async function Lt(e,t){if(!e)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};const{maxBuffer:n}=t,r=At(t);return await new Promise(((t,o)=>{const a=e=>{e&&r.getBufferedLength()<=$t.MAX_LENGTH&&(e.bufferedData=r.getBufferedValue()),o(e)};(async()=>{try{await Gt(e,r),t()}catch(e){a(e)}})(),r.on("data",(()=>{r.getBufferedLength()>n&&a(new _t)}))})),r.getBufferedValue()}It.exports=Lt,It.exports.buffer=(e,t)=>Lt(e,{...t,encoding:"buffer"}),It.exports.array=(e,t)=>Lt(e,{...t,array:!0}),It.exports.MaxBufferError=_t;const{PassThrough:Nt}=v.default;const Mt=kt,Rt=It.exports,Bt=function(){var e=[],t=new Nt({objectMode:!0});return t.setMaxListeners(0),t.add=n,t.isEmpty=r,t.on("unpipe",o),Array.prototype.slice.call(arguments).forEach(n),t;function n(r){return Array.isArray(r)?(r.forEach(n),this):(e.push(r),r.once("end",o.bind(null,r)),r.once("error",t.emit.bind(t,"error")),r.pipe(t,{end:!1}),this)}function r(){return 0==e.length}function o(n){!(e=e.filter((function(e){return e!==n}))).length&&t.readable&&t.end()}},Dt=async(e,t)=>{if(e){e.destroy();try{return await t}catch(e){return e.bufferedData}}},Ft=(e,{encoding:t,buffer:n,maxBuffer:r})=>{if(e&&n)return t?Rt(e,{encoding:t,maxBuffer:r}):Rt.buffer(e,{maxBuffer:r})};var Ut={handleInput:(e,t)=>{void 0!==t&&void 0!==e.stdin&&(Mt(t)?t.pipe(e.stdin):e.stdin.end(t))},makeAllStream:(e,{all:t})=>{if(!t||!e.stdout&&!e.stderr)return;const n=Bt();return e.stdout&&n.add(e.stdout),e.stderr&&n.add(e.stderr),n},getSpawnedResult:async({stdout:e,stderr:t,all:n},{encoding:r,buffer:o,maxBuffer:a},i)=>{const s=Ft(e,{encoding:r,buffer:o,maxBuffer:a}),c=Ft(t,{encoding:r,buffer:o,maxBuffer:a}),u=Ft(n,{encoding:r,buffer:o,maxBuffer:2*a});try{return await Promise.all([i,s,c,u])}catch(r){return Promise.all([{error:r,signal:r.signal,timedOut:r.timedOut},Dt(e,s),Dt(t,c),Dt(n,u)])}},validateInputSync:({input:e})=>{if(Mt(e))throw new TypeError("The `input` option cannot be a stream in sync mode")}};const qt=(async()=>{})().constructor.prototype,Wt=["then","catch","finally"].map((e=>[e,Reflect.getOwnPropertyDescriptor(qt,e)]));var zt={mergePromise:(e,t)=>{for(const[n,r]of Wt){const o="function"==typeof t?(...e)=>Reflect.apply(r.value,t(),e):r.value.bind(t);Reflect.defineProperty(e,n,{...r,value:o})}return e},getSpawnedPromise:e=>new Promise(((t,n)=>{e.on("exit",((e,n)=>{t({exitCode:e,signal:n})})),e.on("error",(e=>{n(e)})),e.stdin&&e.stdin.on("error",(e=>{n(e)}))}))};const Kt=(e,t=[])=>Array.isArray(t)?[e,...t]:[e],Ht=/^[\w.-]+$/,Vt=/"/g,Xt=/ +/g;var Yt={joinCommand:(e,t)=>Kt(e,t).join(" "),getEscapedCommand:(e,t)=>Kt(e,t).map((e=>(e=>"string"!=typeof e||Ht.test(e)?e:`"${e.replace(Vt,'\\"')}"`)(e))).join(" "),parseCommand:e=>{const t=[];for(const n of e.trim().split(Xt)){const e=t[t.length-1];e&&e.endsWith("\\")?t[t.length-1]=`${e.slice(0,-1)} ${n}`:t.push(n)}return t}};const Jt=d.default,Qt=p.default,Zt=C.exports,en=e=>{const t="string"==typeof e?"\n":"\n".charCodeAt(),n="string"==typeof e?"\r":"\r".charCodeAt();return e[e.length-1]===t&&(e=e.slice(0,e.length-1)),e[e.length-1]===n&&(e=e.slice(0,e.length-1)),e},tn=Pe.exports,nn=Te.exports,rn=Je,on=Qe.exports,{spawnedKill:an,spawnedCancel:sn,setupTimeout:cn,validateTimeout:un,setExitHandler:ln}=Pt,{handleInput:dn,getSpawnedResult:pn,makeAllStream:fn,validateInputSync:mn}=Ut,{mergePromise:gn,getSpawnedPromise:hn}=zt,{joinCommand:yn,parseCommand:vn,getEscapedCommand:wn}=Yt,bn=(e,t,n={})=>{const r=Zt._parse(e,t,n);return e=r.command,t=r.args,(n={maxBuffer:1e8,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:(n=r.options).cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...n}).env=(({env:e,extendEnv:t,preferLocal:n,localDir:r,execPath:o})=>{const a=t?{...process.env,...e}:e;return n?tn.env({env:a,cwd:r,execPath:o}):a})(n),n.stdio=on(n),"win32"===process.platform&&"cmd"===Jt.basename(e,".exe")&&t.unshift("/q"),{file:e,args:t,options:n,parsed:r}},xn=(e,t,n)=>"string"==typeof t||Buffer.isBuffer(t)?e.stripFinalNewline?en(t):t:void 0===n?void 0:"",Sn=(e,t,n)=>{const r=bn(e,t,n),o=yn(e,t),a=wn(e,t);let i;un(r.options);try{i=Qt.spawn(r.file,r.args,r.options)}catch(e){const t=new Qt.ChildProcess,n=Promise.reject(rn({error:e,stdout:"",stderr:"",all:"",command:o,escapedCommand:a,parsed:r,timedOut:!1,isCanceled:!1,killed:!1}));return gn(t,n)}const s=hn(i),c=cn(i,r.options,s),u=ln(i,r.options,c),l={isCanceled:!1};i.kill=an.bind(null,i.kill.bind(i)),i.cancel=sn.bind(null,i,l);const d=nn((async()=>{const[{error:e,exitCode:t,signal:n,timedOut:s},c,d,p]=await pn(i,r.options,u),f=xn(r.options,c),m=xn(r.options,d),g=xn(r.options,p);if(e||0!==t||null!==n){const c=rn({error:e,exitCode:t,signal:n,stdout:f,stderr:m,all:g,command:o,escapedCommand:a,parsed:r,timedOut:s,isCanceled:l.isCanceled,killed:i.killed});if(!r.options.reject)return c;throw c}return{command:o,escapedCommand:a,exitCode:0,stdout:f,stderr:m,all:g,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}}));return dn(i,r.options.input),i.all=fn(i,r.options),gn(i,d)};I.exports=Sn,I.exports.sync=(e,t,n)=>{const r=bn(e,t,n),o=yn(e,t),a=wn(e,t);let i;mn(r.options);try{i=Qt.spawnSync(r.file,r.args,r.options)}catch(e){throw rn({error:e,stdout:"",stderr:"",all:"",command:o,escapedCommand:a,parsed:r,timedOut:!1,isCanceled:!1,killed:!1})}const s=xn(r.options,i.stdout,i.error),c=xn(r.options,i.stderr,i.error);if(i.error||0!==i.status||null!==i.signal){const e=rn({stdout:s,stderr:c,error:i.error,signal:i.signal,exitCode:i.status,command:o,escapedCommand:a,parsed:r,timedOut:i.error&&"ETIMEDOUT"===i.error.code,isCanceled:!1,killed:null!==i.signal});if(!r.options.reject)return e;throw e}return{command:o,escapedCommand:a,exitCode:0,stdout:s,stderr:c,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}},I.exports.command=(e,t)=>{const[n,...r]=vn(e);return Sn(n,r,t)},I.exports.commandSync=(e,t)=>{const[n,...r]=vn(e);return Sn.sync(n,r,t)},I.exports.node=(e,t,n={})=>{t&&!Array.isArray(t)&&"object"==typeof t&&(n=t,t=[]);const r=on.node(n),o=process.execArgv.filter((e=>!e.startsWith("--inspect"))),{nodePath:a=process.execPath,nodeOptions:i=o}=n;return Sn(a,[...i,e,...Array.isArray(t)?t:[]],{...n,stdin:void 0,stdout:void 0,stderr:void 0,stdio:r,shell:!1})};var En=I.exports,Pn={exports:{}};const Tn=f.default;let kn;var In=()=>(void 0===kn&&(kn=function(){try{return Tn.statSync("/.dockerenv"),!0}catch(e){return!1}}()||function(){try{return Tn.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch(e){return!1}}()),kn);const Cn=m.default,$n=f.default,On=In,jn=()=>{if("linux"!==process.platform)return!1;if(Cn.release().toLowerCase().includes("microsoft"))return!On();try{return!!$n.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")&&!On()}catch(e){return!1}};process.env.__IS_WSL_TEST__?Pn.exports=jn:Pn.exports=jn();const An=d.default,Gn=p.default,{promises:_n,constants:Ln}=f.default,Nn=Pn.exports,Mn=In,Rn=(e,t,n)=>{const r=n=>Object.defineProperty(e,t,{value:n,enumerable:!0,writable:!0});return Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){const e=n();return r(e),e},set(e){r(e)}}),e},Bn=An.join(__dirname,"xdg-open"),{platform:Dn,arch:Fn}=process,Un=(()=>{const e="/mnt/";let t;return async function(){if(t)return t;const n="/etc/wsl.conf";let r=!1;try{await _n.access(n,Ln.F_OK),r=!0}catch{}if(!r)return e;const o=await _n.readFile(n,{encoding:"utf8"}),a=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(o);return a?(t=a.groups.mountPoint.trim(),t=t.endsWith("/")?t:`${t}/`,t):e}})(),qn=async(e,t)=>{let n;for(const r of e)try{return await t(r)}catch(e){n=e}throw n},Wn=async(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a `target`");if(t={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...t},Array.isArray(t.app))return qn(t.app,(n=>Wn(e,{...t,app:n})));let n,{name:r,arguments:o=[]}=t.app||{};if(o=[...o],Array.isArray(r))return qn(r,(n=>Wn(e,{...t,app:{name:n,arguments:o}})));const a=[],i={};if("darwin"===Dn)n="open",t.wait&&a.push("--wait-apps"),t.background&&a.push("--background"),t.newInstance&&a.push("--new"),r&&a.push("-a",r);else if("win32"===Dn||Nn&&!Mn()){const s=await Un();n=Nn?`${s}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,a.push("-NoProfile","-NonInteractive","–ExecutionPolicy","Bypass","-EncodedCommand"),Nn||(i.windowsVerbatimArguments=!0);const c=["Start"];t.wait&&c.push("-Wait"),r?(c.push(`"\`"${r}\`""`,"-ArgumentList"),o.unshift(e)):c.push(`"${e}"`),o.length>0&&(o=o.map((e=>`"\`"${e}\`""`)),c.push(o.join(","))),e=Buffer.from(c.join(" "),"utf16le").toString("base64")}else{if(r)n=r;else{const e=!__dirname||"/"===__dirname;let t=!1;try{await _n.access(Bn,Ln.X_OK),t=!0}catch{}n=process.versions.electron||"android"===Dn||e||!t?"xdg-open":Bn}o.length>0&&a.push(...o),t.wait||(i.stdio="ignore",i.detached=!0)}a.push(e),"darwin"===Dn&&o.length>0&&a.push("--args",...o);const s=Gn.spawn(n,a,i);return t.wait?new Promise(((e,n)=>{s.once("error",n),s.once("close",(r=>{t.allowNonzeroExitCode&&r>0?n(new Error(`Exited with code ${r}`)):e(s)}))})):(s.unref(),s)};function zn(e){if("string"==typeof e||Array.isArray(e))return e;const{[Fn]:t}=e;if(!t)throw new Error(`${Fn} is not supported`);return t}function Kn({[Dn]:e},{wsl:t}){if(t&&Nn)return zn(t);if(!e)throw new Error(`${Dn} is not supported`);return zn(e)}const Hn={};Rn(Hn,"chrome",(()=>Kn({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}))),Rn(Hn,"firefox",(()=>Kn({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}))),Rn(Hn,"edge",(()=>Kn({darwin:"microsoft edge",win32:"msedge",linux:"microsoft-edge"},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}))),Wn.apps=Hn;var Vn=Wn,Xn=function(e){return e&&e.Math==Math&&e},Yn=Xn("object"==typeof globalThis&&globalThis)||Xn("object"==typeof window&&window)||Xn("object"==typeof self&&self)||Xn("object"==typeof e.commonjsGlobal&&e.commonjsGlobal)||function(){return this}()||Function("return this")(),Jn={},Qn=function(e){try{return!!e()}catch(e){return!0}},Zn=!Qn((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),er={},tr={}.propertyIsEnumerable,nr=Object.getOwnPropertyDescriptor,rr=nr&&!tr.call({1:2},1);er.f=rr?function(e){var t=nr(this,e);return!!t&&t.enumerable}:tr;var or=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},ar={}.toString,ir=function(e){return ar.call(e).slice(8,-1)},sr=ir,cr="".split,ur=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},lr=Qn((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==sr(e)?cr.call(e,""):Object(e)}:Object,dr=ur,pr=function(e){return lr(dr(e))},fr=function(e){return"object"==typeof e?null!==e:"function"==typeof e},mr=fr,gr=function(e,t){if(!mr(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!mr(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!mr(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!mr(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},hr=ur,yr=function(e){return Object(hr(e))},vr={}.hasOwnProperty,wr=Object.hasOwn||function(e,t){return vr.call(yr(e),t)},br=fr,xr=Yn.document,Sr=br(xr)&&br(xr.createElement),Er=function(e){return Sr?xr.createElement(e):{}},Pr=!Zn&&!Qn((function(){return 7!=Object.defineProperty(Er("div"),"a",{get:function(){return 7}}).a})),Tr=Zn,kr=er,Ir=or,Cr=pr,$r=gr,Or=wr,jr=Pr,Ar=Object.getOwnPropertyDescriptor;Jn.f=Tr?Ar:function(e,t){if(e=Cr(e),t=$r(t,!0),jr)try{return Ar(e,t)}catch(e){}if(Or(e,t))return Ir(!kr.f.call(e,t),e[t])};var Gr={},_r=fr,Lr=function(e){if(!_r(e))throw TypeError(String(e)+" is not an object");return e},Nr=Zn,Mr=Pr,Rr=Lr,Br=gr,Dr=Object.defineProperty;Gr.f=Nr?Dr:function(e,t,n){if(Rr(e),t=Br(t,!0),Rr(n),Mr)try{return Dr(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var Fr=Gr,Ur=or,qr=Zn?function(e,t,n){return Fr.f(e,t,Ur(1,n))}:function(e,t,n){return e[t]=n,e},Wr={exports:{}},zr=Yn,Kr=qr,Hr=function(e,t){try{Kr(zr,e,t)}catch(n){zr[e]=t}return t},Vr=Hr,Xr=Yn["__core-js_shared__"]||Vr("__core-js_shared__",{}),Yr=Xr,Jr=Function.toString;"function"!=typeof Yr.inspectSource&&(Yr.inspectSource=function(e){return Jr.call(e)});var Qr=Yr.inspectSource,Zr=Qr,eo=Yn.WeakMap,to="function"==typeof eo&&/native code/.test(Zr(eo)),no={exports:{}},ro=Xr;(no.exports=function(e,t){return ro[e]||(ro[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.15.2",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"});var oo,ao,io,so=0,co=Math.random(),uo=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++so+co).toString(36)},lo=no.exports,po=uo,fo=lo("keys"),mo={},go=to,ho=fr,yo=qr,vo=wr,wo=Xr,bo=function(e){return fo[e]||(fo[e]=po(e))},xo=mo,So=Yn.WeakMap;if(go||wo.state){var Eo=wo.state||(wo.state=new So),Po=Eo.get,To=Eo.has,ko=Eo.set;oo=function(e,t){if(To.call(Eo,e))throw new TypeError("Object already initialized");return t.facade=e,ko.call(Eo,e,t),t},ao=function(e){return Po.call(Eo,e)||{}},io=function(e){return To.call(Eo,e)}}else{var Io=bo("state");xo[Io]=!0,oo=function(e,t){if(vo(e,Io))throw new TypeError("Object already initialized");return t.facade=e,yo(e,Io,t),t},ao=function(e){return vo(e,Io)?e[Io]:{}},io=function(e){return vo(e,Io)}}var Co={set:oo,get:ao,has:io,enforce:function(e){return io(e)?ao(e):oo(e,{})},getterFor:function(e){return function(t){var n;if(!ho(t)||(n=ao(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},$o=Yn,Oo=qr,jo=wr,Ao=Hr,Go=Qr,_o=Co.get,Lo=Co.enforce,No=String(String).split("String");(Wr.exports=function(e,t,n,r){var o,a=!!r&&!!r.unsafe,i=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof t||jo(n,"name")||Oo(n,"name",t),(o=Lo(n)).source||(o.source=No.join("string"==typeof t?t:""))),e!==$o?(a?!s&&e[t]&&(i=!0):delete e[t],i?e[t]=n:Oo(e,t,n)):i?e[t]=n:Ao(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&_o(this).source||Go(this)}));var Mo=Yn,Ro=Yn,Bo=function(e){return"function"==typeof e?e:void 0},Do=function(e,t){return arguments.length<2?Bo(Mo[e])||Bo(Ro[e]):Mo[e]&&Mo[e][t]||Ro[e]&&Ro[e][t]},Fo={},Uo=Math.ceil,qo=Math.floor,Wo=function(e){return isNaN(e=+e)?0:(e>0?qo:Uo)(e)},zo=Wo,Ko=Math.min,Ho=function(e){return e>0?Ko(zo(e),9007199254740991):0},Vo=Wo,Xo=Math.max,Yo=Math.min,Jo=pr,Qo=Ho,Zo=function(e,t){var n=Vo(e);return n<0?Xo(n+t,0):Yo(n,t)},ea=function(e){return function(t,n,r){var o,a=Jo(t),i=Qo(a.length),s=Zo(r,i);if(e&&n!=n){for(;i>s;)if((o=a[s++])!=o)return!0}else for(;i>s;s++)if((e||s in a)&&a[s]===n)return e||s||0;return!e&&-1}},ta={includes:ea(!0),indexOf:ea(!1)},na=wr,ra=pr,oa=ta.indexOf,aa=mo,ia=function(e,t){var n,r=ra(e),o=0,a=[];for(n in r)!na(aa,n)&&na(r,n)&&a.push(n);for(;t.length>o;)na(r,n=t[o++])&&(~oa(a,n)||a.push(n));return a},sa=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"].concat("length","prototype");Fo.f=Object.getOwnPropertyNames||function(e){return ia(e,sa)};var ca={};ca.f=Object.getOwnPropertySymbols;var ua=Fo,la=ca,da=Lr,pa=Do("Reflect","ownKeys")||function(e){var t=ua.f(da(e)),n=la.f;return n?t.concat(n(e)):t},fa=wr,ma=pa,ga=Jn,ha=Gr,ya=Qn,va=/#|\.prototype\./,wa=function(e,t){var n=xa[ba(e)];return n==Ea||n!=Sa&&("function"==typeof t?ya(t):!!t)},ba=wa.normalize=function(e){return String(e).replace(va,".").toLowerCase()},xa=wa.data={},Sa=wa.NATIVE="N",Ea=wa.POLYFILL="P",Pa=wa,Ta=Yn,ka=Jn.f,Ia=qr,Ca=Wr.exports,$a=Hr,Oa=function(e,t){for(var n=ma(t),r=ha.f,o=ga.f,a=0;a<n.length;a++){var i=n[a];fa(e,i)||r(e,i,o(t,i))}},ja=Pa,Aa=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},Ga={},_a=Aa,La=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=_a(t),this.reject=_a(n)};Ga.f=function(e){return new La(e)};var Na,Ma,Ra=Do("navigator","userAgent")||"",Ba=Yn.process,Da=Ba&&Ba.versions,Fa=Da&&Da.v8;Fa?Ma=(Na=Fa.split("."))[0]<4?1:Na[0]+Na[1]:Ra&&(!(Na=Ra.match(/Edge\/(\d+)/))||Na[1]>=74)&&(Na=Ra.match(/Chrome\/(\d+)/))&&(Ma=Na[1]);var Ua=Ma&&+Ma,qa=Qn,Wa=!!Object.getOwnPropertySymbols&&!qa((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Ua&&Ua<41})),za=Wa&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ka=Yn,Ha=no.exports,Va=wr,Xa=uo,Ya=Wa,Ja=za,Qa=Ha("wks"),Za=Ka.Symbol,ei=Ja?Za:Za&&Za.withoutSetter||Xa,ti=function(e){return Va(Qa,e)&&(Ya||"string"==typeof Qa[e])||(Ya&&Va(Za,e)?Qa[e]=Za[e]:Qa[e]=ei("Symbol."+e)),Qa[e]},ni={},ri=ni,oi=ti("iterator"),ai=Array.prototype,ii=Aa,si={};si[ti("toStringTag")]="z";var ci="[object z]"===String(si),ui=ir,li=ti("toStringTag"),di="Arguments"==ui(function(){return arguments}()),pi=ci?ui:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),li))?n:di?ui(t):"Object"==(r=ui(t))&&"function"==typeof t.callee?"Arguments":r},fi=ni,mi=ti("iterator"),gi=Lr,hi=Lr,yi=function(e){return void 0!==e&&(ri.Array===e||ai[oi]===e)},vi=Ho,wi=function(e,t,n){if(ii(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}},bi=function(e){if(null!=e)return e[mi]||e["@@iterator"]||fi[pi(e)]},xi=function(e){var t=e.return;if(void 0!==t)return gi(t.call(e)).value},Si=function(e,t){this.stopped=e,this.result=t},Ei=Aa,Pi=Ga,Ti=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},ki=function(e,t,n){var r,o,a,i,s,c,u,l=n&&n.that,d=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),f=!(!n||!n.INTERRUPTED),m=wi(t,l,1+d+f),g=function(e){return r&&xi(r),new Si(!0,e)},h=function(e){return d?(hi(e),f?m(e[0],e[1],g):m(e[0],e[1])):f?m(e,g):m(e)};if(p)r=e;else{if("function"!=typeof(o=bi(e)))throw TypeError("Target is not iterable");if(yi(o)){for(a=0,i=vi(e.length);i>a;a++)if((s=h(e[a]))&&s instanceof Si)return s;return new Si(!1)}r=o.call(e)}for(c=r.next;!(u=c.call(r)).done;){try{s=h(u.value)}catch(e){throw xi(r),e}if("object"==typeof s&&s&&s instanceof Si)return s}return new Si(!1)};async function Ii(t,n,r=[]){const o=(new Date).getTime(),a=atom.packages.getApmPath(),i=`Package Control is ${Oi(t).continous.toLowerCase()} the ${n} package`;e.Logger.log(`${Oi(t).continous} ${n} package`),e.Signal.add(i);try{await En(a,[t,n,...r])}catch(n){return e.Logger.error(`${Oi(t).noun} failed: ${n.shortMessage}`),e.Signal.add(`${Oi(t).noun} failed: ${n.shortMessage}`),atom.notifications.addError(`**Package Control**: ${Oi(t).noun} failed`,{detail:n.shortMessage,dismissable:!0}),void e.Signal.remove(i)}const s=(new Date).getTime()-o;e.Logger.log(`${Oi(t).perfect} ${n} in ${s/1e3} seconds`),e.Signal.remove(i)}function Ci(e,t){return e.sort(((e,n)=>e[t].localeCompare(n[t])))}function $i(e,t){return e.sort(((e,n)=>n[t]-e[t]))}function Oi(e){switch(e){case"install":case"stars":return{continous:"Installing",noun:"Installation",perfect:"Installed"};case"remove":return{continous:"Removing",noun:"Removal",perfect:"Removed"};case"enable":return{continous:"Enabling",noun:"Enabling",perfect:"Enabled"};case"disable":return{continous:"Disabling",noun:"Disabling",perfect:"Disabled"};case"list":return{continous:"Listing",noun:"Listing",perfect:"Listed"};case"satisfy":return{continous:"Satisfying",noun:"Satisfying",perfect:"Satisfied"};case"update":return{continous:"Updating",noun:"Update",perfect:"Updated"};default:throw Error(`Unsupported action: ${e}`)}}function ji(){const t=String(e.config.get("githubUser")).trim();return t?.length?["--user",t]:[]}function Ai(e){return e.startsWith("v")?e:`v${e}`}(function(e,t){var n,r,o,a,i,s=e.target,c=e.global,u=e.stat;if(n=c?Ta:u?Ta[s]||$a(s,{}):(Ta[s]||{}).prototype)for(r in t){if(a=t[r],o=e.noTargetGet?(i=ka(n,r))&&i.value:n[r],!ja(c?r:s+(u?".":"#")+r,e.forced)&&void 0!==o){if(typeof a==typeof o)continue;Oa(a,o)}(e.sham||o&&o.sham)&&Ia(a,"sham",!0),Ca(n,r,a,e)}})({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=Pi.f(t),r=n.resolve,o=n.reject,a=Ti((function(){var n=Ei(t.resolve),o=[],a=0,i=1;ki(e,(function(e){var s=a++,c=!1;o.push(void 0),i++,n.call(t,e).then((function(e){c||(c=!0,o[s]={status:"fulfilled",value:e},--i||r(o))}),(function(e){c||(c=!0,o[s]={status:"rejected",reason:e},--i||r(o))}))})),--i||r(o)}));return a.error&&o(a.value),n.promise}});var Gi=Object.freeze({__proto__:null,createList:async function(t){const n=await Li(t);if(void 0===n)return;let r,o;const a=atom.packages.getAvailablePackageNames(),i=a.filter((e=>!atom.packages.isPackageDisabled(e))),s=a.filter((e=>atom.packages.isPackageDisabled(e)));switch("stars"===t&&(o=await async function(){const t="Package Control is retrieving starred packages";e.Logger.log("Retrieving starred packages"),e.Signal.add(t);const n=atom.packages.getApmPath();let r;try{r=await En(n,["stars","--json",...ji()])}catch(e){throw Error(e.message)}finally{e.Signal.remove(t)}return JSON.parse(r.stdout).map((e=>e.name))||[]}()),t){case"install":r=n.filter((e=>!a.includes(e.name)));break;case"enable":r=n.filter((e=>a.includes(e.name)&&s.includes(e.name)));break;case"disable":r=n.filter((e=>a.includes(e.name)&&i.includes(e.name)));break;case"stars":r=n.filter((e=>!a.includes(e.name)&&o.includes(e.name)));break;case"update":r=await async function(t){const n="Package Control is retrieving outdated packages";e.Logger.log("Retrieving outdated packages"),e.Signal.add(n);const r=atom.packages.getApmPath();let o;try{o=await En(r,["update","--compatible","--json","--list"])}catch(e){throw Error(e.message)}finally{e.Signal.remove(n)}return JSON.parse(o.stdout).map((({name:e,version:n,latestVersion:r})=>{const o=t.filter((t=>t.name===e))[0];return{description:o.description||"",downloads:o.downloads||0,name:e,stars:o.stars||0,theme:o.theme||void 0,version:`${Ai(n)} &#8594; ${Ai(r)}`}}))||[]}(n);break;default:r=n.filter((e=>a.includes(e.name)))}if(!r.length){const n="stars"===t?"install":t;return e.Logger.log(`No packages to ${n}`),void atom.notifications.addInfo(`**Package Control**: No packages to ${n}`)}let c;try{c=await async function(t){let n;const r=document.activeElement,o=(await Promise.resolve().then((function(){return require("./select-list-view-f4a15745.js")})).then((function(e){return e.selectListView}))).default,a=(await Promise.resolve().then((function(){return require("./numbro.min-39413b32.js")})).then((function(e){return e.numbro_min}))).default;try{return await new Promise(((r,i)=>{const s=new o({didCancelSelection:()=>i("cancelled"),didConfirmSelection:e=>r(e.name),elementForItem:t=>{const n=document.createElement("li"),r=t.version?Ai(t.version):"",o=t.downloads?`${a(t.downloads).format(k)}`:"",i=t.stars?`${a(t.stars).format(k)}`:"",s=t.theme?"ui"===t.theme?"browser":"paintcan":"code",c=e.config.get("ui"),u="normal"!==c.packageTextStyle?`text-${c.packageTextStyle}`:"",l="normal"!==c.versionTextStyle?`text-${c.versionTextStyle}`:"",d="normal"!==c.statsTextStyle?`text-${c.statsTextStyle}`:"",p="normal"!==c.descriptionTextStyle?`text-${c.descriptionTextStyle}`:"",f=c.showPackageTypeIcon?`icon icon-${s}`:"",m=c.showPackageStats?`\n              <div class="pull-right ${d}">\n                <span class="icon icon-cloud-download">${o}</span>\n                <span class="icon icon-star">${i}</span>\n              </div>\n            `:"";return n.innerHTML=`\n            <div class="package-control block">\n              ${m}\n\n              <span class="${f}">\n                <strong class="${u}">${t.name}</strong>\n                <span class="${l}">${r}</span>\n                <div class="truncate-text ${p}">${t.description||""}</div>\n              </span>\n            </div>\n          `,n},emptyMessage:"No packages found",filterKeyForItem:e=>e.name,items:t,maxResults:Number(e.config.get("maxResults")),selectQuery:!0});n=atom.workspace.addModalPanel({item:s,visible:!0}),s.focus()}))}finally{n&&n.destroy(),r&&r.focus()}}(r)}catch(t){return void e.Logger.log("Closed list view:",t)}if(void 0!==c)switch(t){case"install":case"remove":case"disable":case"enable":await Ii(t,c);break;case"stars":Ii("install",c);break;case"update":await Ii(t,c,["--compatible","--no-confirm"]);break;case"list":e.Browse.reveal(c)}},installAllStars:async function(){const t="Package Control is installing all starred packages",n=(new Date).getTime(),r="install",o=atom.packages.getApmPath();e.Logger.log(`${Oi(r).continous} all packages`),e.Signal.add(t);try{await En(o,["stars","--install",...ji()])}catch(n){return e.Logger.error(`${Oi(r).continous} all starred packages failed: ${n.shortMessage}`),atom.notifications.addError(`**Package Control**: ${Oi(r).continous} all starred packages failed`,{detail:n.shortMessage,dismissable:!0}),void e.Signal.remove(t)}const a=(new Date).getTime()-n;e.Logger.log(`${Oi(r).perfect} all starred packages in ${a/1e3} seconds`),e.Signal.remove(t)},normalizeVersion:Ai,openWebsite:async function(t){e.Logger.log(`Opening https://atom.io/${t}`),await Vn(`https://atom.io/${t}`)},satisfyDependencies:async function(){const t="Package Control is satisfying all package dependencies",n=(new Date).getTime(),r="satisfy",o=atom.packages.getLoadedPackages().map((e=>e.name));e.Logger.log(`${Oi(r).continous} all packages dependencies`),e.Signal.add(t);const a=(await Promise.resolve().then((function(){return require("./index-4432bce6.js")})).then((function(e){return e.index}))).install;await Promise.allSettled(o.map((async t=>await a(t,!e.config.get("confirmSatisfyingDependencies")))));const i=(new Date).getTime()-n;e.Logger.log(`${Oi(r).perfect} all packages in ${i/1e3} seconds`),e.Signal.remove(t)},sortByName:Ci,sortByCount:$i,updateAll:async function(){const t="Package Control updating all packages",n=(new Date).getTime(),r="update",o=atom.packages.getApmPath();e.Logger.log(`${Oi(r).continous} all packages`),e.Signal.add(t);try{await En(o,["update","--no-confirm"])}catch(n){return e.Logger.error(`${Oi(r).continous} all packages failed: ${n.shortMessage}`),atom.notifications.addError(`**Package Control**: ${Oi(r).continous} all packages failed`,{detail:n.shortMessage,dismissable:!0}),void e.Signal.remove(t)}const a=(new Date).getTime()-n;e.Logger.log(`${Oi(r).perfect} all packages in ${a/1e3} seconds`),e.Signal.remove(t)}});const _i=x("package-control","1.0.0");async function Li(t){const{get:n}=await Promise.resolve().then((function(){return T})),r=await n("packagesCache",_i)||{};if(!Object.keys(r).length)return await Mi(),await Li(t);const o=String(e.config.get("sortPackages"));switch(t){case"install":return"name"===o?Ci(r,o):$i(r,o);default:return Ci(r,"name")}}async function Ni(t,n){const r=(new Date).toISOString();e.Logger.log("Saving package cache",{length:t.length,lastUpdate:r,checksums:n||{}});const{set:o}=await Promise.resolve().then((function(){return T}));await o("packagesCache",t,_i),await o("lastUpdate",r,_i),await o("checksums",n,_i)}async function Mi(){const{differenceInMinutes:t}=await Promise.resolve().then((function(){return require("./index-9d05f127.js")})),{get:n}=await Promise.resolve().then((function(){return T})),r=await n("lastUpdate",_i)||0,o=t(new Date,new Date(r));if(o<Number(e.config.get("updateInterval")))return void e.Logger.log(`Skipping package retrieval, last update was ${o} minutes ago`);e.Logger.log("Downloading packages list");const a=await e.Fetch.getPackageData();if(a.ok){const e=(await Promise.resolve().then((function(){return require("./index-3463a409.js")})).then((function(e){return e.index}))).ungzip(await a.arrayBuffer()),t=JSON.parse((new TextDecoder).decode(e)),n=a.checksums||{};await Ni(t,n)}}var Ri=Object.freeze({__proto__:null,fetchPackages:Mi,getPackages:Li,setPackages:Ni});exports.api=Ri,exports.util=Gi;
//# sourceMappingURL=api-1b94ee6e.js.map
